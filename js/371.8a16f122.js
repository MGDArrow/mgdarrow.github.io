"use strict";(self["webpackChunkfunerals_ru"]=self["webpackChunkfunerals_ru"]||[]).push([[371],{27:function(e,t,s){s.d(t,{Z:function(){return d}});var i=s(3396);const n=["value"];function l(e,t,s,l,r,a){return(0,i.wg)(),(0,i.iD)("input",{type:"button",value:s.text},null,8,n)}var r={name:"TheButton",props:["text"]},a=s(89);const o=(0,a.Z)(r,[["render",l],["__scopeId","data-v-089df75f"]]);var d=o},3132:function(e,t,s){s.d(t,{Z:function(){return p}});var i=s(3396),n=s(7139);const l={class:"input-block"},r=["type","value"];function a(e,t,s,a,o,d){return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("label",{class:(0,n.C_)({"input--is-focus":o.isFocus,"input--is-text":s.modelValue||0===s.modelValue,"input--is-valid":s.dirty&&!o.isFocus&&s.valid,"input--is-invalid":s.dirty&&!o.isFocus&&!s.valid})},[(0,i.Uk)((0,n.zw)(d.labelText)+" ",1),(0,i._)("input",{type:s.type,value:s.modelValue,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),onFocus:t[1]||(t[1]=e=>o.isFocus=!0),onBlur:t[2]||(t[2]=t=>{o.isFocus=!1,e.$emit("blur",!0)})},null,40,r)],2)])}var o={name:"TheInputText",props:["type","label","dirty","valid","labelInvalid","modelValue"],data(){return{isFocus:!1}},computed:{labelText(){return this.$props.labelInvalid&&!this.isFocus&&this.$props.dirty?`Заполните поле "${this.$props.label}"`:this.$props.label}}},d=s(89);const c=(0,d.Z)(o,[["render",a]]);var p=c},7285:function(e,t,s){s.d(t,{Z:function(){return u}});var i=s(3396);const n={class:"js-swiper",ref:"swiperBlock"},l={class:"js-swiper__delete",ref:"delete"},r={class:"js-swiper__edit",ref:"edit"},a={class:"js-swiper__main",ref:"swiper"};function o(e,t,s,o,d,c){const p=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",l,[(0,i.Wm)(p,{icon:["fas","trash"]})],512),(0,i._)("div",r,[(0,i.Wm)(p,{icon:["fas","pencil"]})],512),(0,i._)("div",a,[(0,i.WI)(e.$slots,"default")],512)],512)}var d={name:"TheSwiper",mounted(){let e,t,s,i,n=this.$refs.swiper,l=null;n.addEventListener("touchstart",(i=>{e=n.offsetWidth,t=i.touches[0].clientX,s=i.touches[0].clientY,n.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${n.clientHeight}px`,this.$refs.delete.style.height=`${n.clientHeight}px`})),n.addEventListener("touchmove",(r=>{let a=r.touches[0].clientX,o=r.touches[0].clientY;i=a-t,l=o-s,Math.abs(i)>e/8&&Math.abs(i)>2*Math.abs(l)&&(n.style.translate=i<0?`${i+e/8}px`:i-e/8+"px",i>0?(this.$refs.delete.style.width=Math.abs(i)-e/8+"px",this.$refs.edit.style.width="0px"):(this.$refs.delete.style.width="0px",this.$refs.edit.style.width=Math.abs(i)-e/8+"px"),e/1.3<Math.abs(i)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))})),n.addEventListener("touchend",(()=>{e/1.3<Math.abs(i)?i<0?(n.style.transition="0.4s ease-in-out",n.style.translate="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",this.$emit("swipe","edit")):(n.style.transition="0.4s ease-in-out",n.style.translate=`${e}px`,this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width=`${e}px`,this.$refs.swiperBlock.style.height=`${n.offsetHeight+5}px`,this.$refs.swiperBlock.style.transition="0.4s ease-in-out",setTimeout((()=>{this.$refs.swiperBlock.style.height="0px"}),100),this.$emit("swipe","delete")):(n.style.transition="0.4s ease-in-out",n.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px")}))}},c=s(89);const p=(0,c.Z)(d,[["render",o]]);var u=p},8371:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var i=s(3396);const n={class:".app-settings__cemeterys",ref:"scrollUP"};function l(e,t,s,l,r,a){const o=(0,i.up)("settings-cemeterys-add"),d=(0,i.up)("settings-cemeterys-point");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(o,{editID:r.editID,onClearForm:t[0]||(t[0]=e=>r.editID=e)},null,8,["editID"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.getCemeterys,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.id,cemetery:e,onGetEdit:t[1]||(t[1]=e=>r.editID=e)},null,8,["cemetery"])))),128))],512)}var r=s(7139);const a={class:"settings-cemeterys__point"},o={class:"cemeterys-point__name"},d={class:"cemeterys-point__label"};function c(e,t,s,n,l,c){const p=(0,i.up)("the-swiper");return(0,i.wg)(),(0,i.j4)(p,{onSwipe:t[0]||(t[0]=e=>l.swipe=e)},{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",o,(0,r.zw)(s.cemetery?.name),1),(0,i._)("div",d,(0,r.zw)(s.cemetery?.label),1)])])),_:1})}var p=s(7285),u={components:{TheSwiper:p.Z},name:"SettingsCemeterysPoint",props:["cemetery"],data(){return{swipe:null}},watch:{swipe(e){"delete"==e&&this.$store.dispatch("DELETE_CEMETERYS",this.$props.cemetery.id),"edit"==e&&this.$emit("getEdit",this.$props.cemetery.id),this.swipe=null}}},h=s(89);const m=(0,h.Z)(u,[["render",c]]);var y=m;const f={class:"cemeterys-add__form"};function $(e,t,s,n,l,a){const o=(0,i.up)("font-awesome-icon"),d=(0,i.up)("the-input-text"),c=(0,i.up)("the-button");return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["settings-cemeterys__add",{"settings-cemeterys__add--open":l.isOpen}])},[(0,i._)("div",{class:(0,r.C_)(["cemeterys-add__btn",{"cemeterys-add__btn--open":l.isOpen}]),onClick:t[0]||(t[0]=(...e)=>a.clearForm&&a.clearForm(...e))},[(0,i.Wm)(o,{icon:["fas","plus"],size:"xs"})],2),(0,i._)("div",f,[(0,i.Wm)(d,{type:"text",label:"Название",modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,i.Wm)(d,{type:"text",label:"Район",modelValue:l.label,"onUpdate:modelValue":t[2]||(t[2]=e=>l.label=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),s.editID?((0,i.wg)(),(0,i.j4)(c,{key:0,text:"Изменить",onClick:t[3]||(t[3]=e=>a.editCemetery())})):((0,i.wg)(),(0,i.j4)(c,{key:1,text:"Добавить",onClick:t[4]||(t[4]=e=>a.addCemetery())}))])],2)}var w=s(27),_=s(3132),v={name:"SettingsCemeterysAdd",props:["editID"],components:{TheInputText:_.Z,TheButton:w.Z},data(){return{isOpen:!1,name:"",label:""}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.label="",this.$emit("clearForm",null)},async addCemetery(){this.$store.dispatch("ADD_CEMETERYS",{name:this.name,label:this.label}).then(this.clearForm())},async editCemetery(){this.$store.dispatch("EDIT_CEMETERYS",[{name:this.name,label:this.label},this.$props.editID]).then(this.clearForm())}},watch:{editID(e){if(e){let t=this.$store.getters.GET_CEMETERYS.find((t=>t.id==e));this.isOpen=!0,this.name=t.name,this.label=t.label}}}};const b=(0,h.Z)(v,[["render",$]]);var g=b,x={components:{SettingsCemeterysAdd:g,SettingsCemeterysPoint:y},name:"AppSettingsCemeterys",data(){return{editID:null}},watch:{editID(e){e&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getCemeterys(){return this.$store.getters.GET_CEMETERYS}}};const E=(0,h.Z)(x,[["render",l]]);var C=E}}]);
//# sourceMappingURL=371.8a16f122.js.map