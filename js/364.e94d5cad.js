"use strict";(self["webpackChunkfunerals_ru"]=self["webpackChunkfunerals_ru"]||[]).push([[364],{9364:function(t,e,a){a.r(e),a.d(e,{default:function(){return L}});var n=a(3396),s=a(9242);const o={class:"appBlockDate"},d={class:"appBlockMain"},l={class:"appBlockNav"};function i(t,e,a,i,r,h){const c=(0,n.up)("app-date"),_=(0,n.up)("router-view"),m=(0,n.up)("app-nav-bar");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",o,[(0,n.Wm)(c)]),(0,n._)("div",d,[(0,n.Wm)(_,null,{default:(0,n.w5)((({Component:t})=>[(0,n.Wm)(s.uT,{name:"slide"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(t)))])),_:2},1024)])),_:1})]),(0,n._)("div",l,[(0,n.Wm)(m)])])}var r=a(7139);const h={class:"funerals-menu"},c={key:0,class:"point-check"},_={key:0,class:"point-check"};function m(t,e,a,s,o,d){const l=(0,n.up)("font-awesome-icon"),i=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("nav",h,[(0,n.Wm)(i,{to:"/read",class:"funerals-menu__point"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:["fas","list-ul"],size:"xs"})])),_:1}),(0,n.Wm)(i,{to:"/statistic",class:"funerals-menu__point"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:["fas","chart-simple"],size:"xs"})])),_:1}),(0,n.Wm)(i,{to:"/",class:"funerals-menu__point"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:["fas","plus"],size:"xs"})])),_:1}),(0,n.Wm)(i,{to:"/allocation",class:"funerals-menu__point"},{default:(0,n.w5)((()=>[d.allocationLength?((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("span",null,(0,r.zw)(d.allocationLength),1)])):(0,n.kq)("",!0),(0,n.Wm)(l,{icon:["fas","shuffle"],size:"xs"})])),_:1}),(0,n.Wm)(i,{to:"/phone",class:"funerals-menu__point"},{default:(0,n.w5)((()=>[d.phoneLength?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("span",null,(0,r.zw)(d.phoneLength),1)])):(0,n.kq)("",!0),(0,n.Wm)(l,{icon:["fas","phone"],size:"xs"})])),_:1}),(0,n.Wm)(i,{to:"/settings",class:"funerals-menu__point"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:["fas","gear"],size:"xs"})])),_:1})])}var y={name:"AppNavBar",computed:{phoneLength(){return this.$store.getters.GET_FUNERALS_PHONE_LENGHT},allocationLength(){return this.$store.getters.GET_FUNERALS_ALLOCATION_LENGHT}}},u=a(89);const C=(0,u.Z)(y,[["render",m]]);var p=C;const T={class:"get-date"},b={class:"get-date__menu-date"},E={class:"calendar__menu"},O={class:"calendar__weakdays"},g={class:"calendar__days"},f=["onClick"];function w(t,e,a,s,o,d){const l=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("div",b,[(0,n._)("div",{class:(0,r.C_)(["menu-date__text",{"js-menu-date__text--active":d.isShothToday}]),onClick:e[0]||(e[0]=e=>{t.$store.commit("SET_TODAY"),d.getMonthUpd()})},(0,r.zw)(t.$store.getters.GET_SHORT),3),(0,n._)("div",{class:"menu-date__back--btn",onClick:e[1]||(e[1]=e=>{t.$store.commit("UPD_DAY",-1),d.getMonthUpd()})},[(0,n.Wm)(l,{icon:["fas","caret-left"]})]),(0,n._)("div",{class:"menu-date__next--btn",onClick:e[2]||(e[2]=e=>{t.$store.commit("UPD_DAY",1),d.getMonthUpd()})},[(0,n.Wm)(l,{icon:["fas","caret-left"],rotation:"180"})]),(0,n._)("div",{class:(0,r.C_)(["menu-date__calendar--btn",{"js-calendar--btn--act":o.openCalendar}]),onClick:e[3]||(e[3]=t=>o.openCalendar=!o.openCalendar)},[(0,n.Wm)(l,{icon:["fas","calendar-days"]})],2)]),(0,n._)("div",{class:(0,r.C_)(["get-date__calendar",{"js-calendar--open":o.openCalendar}])},[(0,n._)("div",E,[(0,n._)("div",{class:"menu__back--btn",onClick:e[4]||(e[4]=t=>--o.dateCalendarObj.month)},[(0,n.Wm)(l,{icon:["fas","caret-left"]})]),(0,n._)("div",{class:(0,r.C_)(["menu__text",{"js-menu__text--active":d.isMonthNow}]),onClick:e[5]||(e[5]=t=>d.getMonthNow())},(0,r.zw)(d.getShortMonth),3),(0,n._)("div",{class:"menu__next--btn",onClick:e[6]||(e[6]=t=>++o.dateCalendarObj.month)},[(0,n.Wm)(l,{icon:["fas","caret-left"],rotation:"180"})])]),(0,n._)("div",O,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.daysWeak,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{class:"weekdays__day",key:e},(0,r.zw)(t),1)))),128))]),(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.getDateCells,(t=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["day",{"another-month":"backMonth"==t.isMonthStyle||"nextMonth"==t.isMonthStyle,"today-cell":d.isCellToday(t),"active-cell":d.isCellActive(t.day)&&"isMonth"==t.isMonthStyle}]),key:t.id,onClick:e=>d.clickSetCell(t)},(0,r.zw)(t.day),11,f)))),128))])],2)])}a(7658);var S=a(4827),M={name:"AppDate",data(){return{openCalendar:!1,daysWeak:S.$1,monthsFull:S.lM,dateCalendarObj:void 0,calendarToday:void 0}},computed:{isShothToday(){let t=this.$store.getters.GET_DATE_OBJ;return new Date(t.year,t.month,t.day).getTime()==new Date(this.calendarToday.year,this.calendarToday.month,this.calendarToday.day).getTime()},isMonthNow(){return this.dateCalendarObj.year===this.calendarToday.year&&this.dateCalendarObj.month===this.calendarToday.month},getShortMonth(){let t=new Date(this.dateCalendarObj.year,this.dateCalendarObj.month),e=t.getFullYear(),a=t.getMonth();return`${this.monthsFull[a]} ${e}`},getDateCells(){let t=this.dateCalendarObj,e=(new Date(t.year,t.month+1,1)-new Date(t.year,t.month,1))/864e5,a=(new Date(t.year,t.month,1)-new Date(t.year,t.month-1,1))/864e5,n=new Date(t.year,t.month,1).getDay();n=0===n?6:--n;let s=[];for(let o=n;o>0;o--)s.push({day:a-o+1,isMonthStyle:"backMonth"});for(let o=1;o<=e;o++)s.push({day:o,isMonthStyle:"isMonth"});for(let o=1;o<=42-e-n;o++)s.push({day:o,isMonthStyle:"nextMonth"});return s}},methods:{getMonthNow(){this.dateCalendarObj.year=this.calendarToday.year,this.dateCalendarObj.month=this.calendarToday.month},getMonthUpd(){let t=this.$store.getters.GET_DATE_OBJ;this.dateCalendarObj.year=new Date(t.year,t.month,t.day).getFullYear(),this.dateCalendarObj.month=new Date(t.year,t.month,t.day).getMonth()},isCellActive(t){let e=this.$store.getters.GET_DATE_OBJ;return new Date(e.year,e.month,e.day).getTime()==new Date(this.dateCalendarObj.year,this.dateCalendarObj.month,t).getTime()},isCellToday(t){return t.day==this.calendarToday.day&&this.dateCalendarObj.month==this.calendarToday.month&&this.dateCalendarObj.year==this.calendarToday.year&&"isMonth"==t.isMonthStyle||t.day==this.calendarToday.day&&this.dateCalendarObj.month-1==this.calendarToday.month&&this.dateCalendarObj.year==this.calendarToday.year&&"backMonth"==t.isMonthStyle||t.day==this.calendarToday.day&&this.dateCalendarObj.month+1==this.calendarToday.month&&this.dateCalendarObj.year==this.calendarToday.year&&"nextMonth"==t.isMonthStyle},clickSetCell(t){"backMonth"==t.isMonthStyle&&(this.dateCalendarObj.month=0!=this.dateCalendarObj.month?--this.dateCalendarObj.month:11,this.dateCalendarObj.year=11==this.dateCalendarObj.month?--this.dateCalendarObj.year:this.dateCalendarObj.year),"nextMonth"==t.isMonthStyle&&(this.dateCalendarObj.month=11!=this.dateCalendarObj.month?++this.dateCalendarObj.month:0,this.dateCalendarObj.year=0==this.dateCalendarObj.month?++this.dateCalendarObj.year:this.dateCalendarObj.year);let e={year:this.dateCalendarObj.year,month:this.dateCalendarObj.month,day:t.day};this.$store.commit("UPD_ALL_DATE",e),this.openCalendar=!1}},created(){this.$store.commit("SET_TODAY"),this.$store.commit("UPD_DAY",1);let t=new Date,e=t.getFullYear(),a=t.getMonth(),n=t.getDate();this.dateCalendarObj={year:e,month:a},this.calendarToday={year:e,month:a,day:n}}};const v=(0,u.Z)(M,[["render",w],["__scopeId","data-v-39a76996"]]);var D=v,j=a(3786),k={components:{AppNavBar:p,AppDate:D},name:"LayoutBasic",beforeMount(){this.$store.dispatch("SET_TEMPLS"),this.$store.dispatch("SET_CEMETERYS"),this.$store.dispatch("SET_SERVICES"),this.$store.dispatch("SET_FUNERALS_PHONE"),this.$store.dispatch("SET_FUNERALS_ALLOCATION"),j.O.channel("any").on("postgres_changes",{event:"*",schema:"*"},(t=>{"TEMPL"==t.table&&this.$store.dispatch("SET_TEMPLS"),"CEMETERY"==t.table&&this.$store.dispatch("SET_CEMETERYS"),"SERVICE"==t.table&&this.$store.dispatch("SET_SERVICES"),"FUNERAL"==t.table&&(this.$store.dispatch("SET_FUNERALS_PHONE"),this.$store.dispatch("SET_FUNERALS_ALLOCATION"),this.$store.dispatch("SET_FUNERALS_READ"))})).subscribe()}};const A=(0,u.Z)(k,[["render",i]]);var L=A}}]);
//# sourceMappingURL=364.e94d5cad.js.map