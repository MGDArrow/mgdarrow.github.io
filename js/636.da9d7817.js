"use strict";(self["webpackChunkfunerals_ru"]=self["webpackChunkfunerals_ru"]||[]).push([[636],{27:function(e,t,s){s.d(t,{Z:function(){return d}});var i=s(3396);const n=["value"];function r(e,t,s,r,a,l){return(0,i.wg)(),(0,i.iD)("input",{type:"button",value:s.text},null,8,n)}var a={name:"TheButton",props:["text"]},l=s(89);const o=(0,l.Z)(a,[["render",r],["__scopeId","data-v-089df75f"]]);var d=o},3132:function(e,t,s){s.d(t,{Z:function(){return p}});var i=s(3396),n=s(7139);const r={class:"input-block"},a=["type","value"];function l(e,t,s,l,o,d){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("label",{class:(0,n.C_)({"input--is-focus":o.isFocus,"input--is-text":s.modelValue||0===s.modelValue,"input--is-valid":s.dirty&&!o.isFocus&&s.valid,"input--is-invalid":s.dirty&&!o.isFocus&&!s.valid})},[(0,i.Uk)((0,n.zw)(d.labelText)+" ",1),(0,i._)("input",{type:s.type,value:s.modelValue,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),onFocus:t[1]||(t[1]=e=>o.isFocus=!0),onBlur:t[2]||(t[2]=t=>{o.isFocus=!1,e.$emit("blur",!0)})},null,40,a)],2)])}var o={name:"TheInputText",props:["type","label","dirty","valid","labelInvalid","modelValue"],data(){return{isFocus:!1}},computed:{labelText(){return this.$props.labelInvalid&&!this.isFocus&&this.$props.dirty?`Заполните поле "${this.$props.label}"`:this.$props.label}}},d=s(89);const c=(0,d.Z)(o,[["render",l]]);var p=c},7285:function(e,t,s){s.d(t,{Z:function(){return u}});var i=s(3396);const n={class:"js-swiper",ref:"swiperBlock"},r={class:"js-swiper__delete",ref:"delete"},a={class:"js-swiper__edit",ref:"edit"},l={class:"js-swiper__main",ref:"swiper"};function o(e,t,s,o,d,c){const p=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",r,[(0,i.Wm)(p,{icon:["fas","trash"]})],512),(0,i._)("div",a,[(0,i.Wm)(p,{icon:["fas","pencil"]})],512),(0,i._)("div",l,[(0,i.WI)(e.$slots,"default")],512)],512)}var d={name:"TheSwiper",mounted(){let e,t,s,i,n=this.$refs.swiper,r=null;n.addEventListener("touchstart",(i=>{e=n.offsetWidth,t=i.touches[0].clientX,s=i.touches[0].clientY,n.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${n.clientHeight}px`,this.$refs.delete.style.height=`${n.clientHeight}px`})),n.addEventListener("touchmove",(a=>{let l=a.touches[0].clientX,o=a.touches[0].clientY;i=l-t,r=o-s,Math.abs(i)>e/8&&Math.abs(i)>2*Math.abs(r)&&(n.style.translate=i<0?`${i+e/8}px`:i-e/8+"px",i>0?(this.$refs.delete.style.width=Math.abs(i)-e/8+"px",this.$refs.edit.style.width="0px"):(this.$refs.delete.style.width="0px",this.$refs.edit.style.width=Math.abs(i)-e/8+"px"),e/1.3<Math.abs(i)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))})),n.addEventListener("touchend",(()=>{e/1.3<Math.abs(i)?i<0?(n.style.transition="0.4s ease-in-out",n.style.translate="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",this.$emit("swipe","edit")):(n.style.transition="0.4s ease-in-out",n.style.translate=`${e}px`,this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width=`${e}px`,this.$refs.swiperBlock.style.height=`${n.offsetHeight+5}px`,this.$refs.swiperBlock.style.transition="0.4s ease-in-out",setTimeout((()=>{this.$refs.swiperBlock.style.height="0px"}),100),this.$emit("swipe","delete")):(n.style.transition="0.4s ease-in-out",n.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px")}))}},c=s(89);const p=(0,c.Z)(d,[["render",o]]);var u=p},1636:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var i=s(3396);const n={class:".app-settings__services",ref:"scrollUP"};function r(e,t,s,r,a,l){const o=(0,i.up)("settings-services-add"),d=(0,i.up)("settings-services-point");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(o,{editID:a.editID,onClearForm:t[0]||(t[0]=e=>a.editID=e)},null,8,["editID"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.getServices,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.id,service:e,onGetEdit:t[1]||(t[1]=e=>a.editID=e)},null,8,["service"])))),128))],512)}var a=s(7139);const l={class:"settings-services__point"};function o(e,t,s,n,r,o){const d=(0,i.up)("the-swiper");return(0,i.wg)(),(0,i.j4)(d,{onSwipe:t[0]||(t[0]=e=>r.swipe=e)},{default:(0,i.w5)((()=>[(0,i._)("div",l,(0,a.zw)(s.service?.name),1)])),_:1})}var d=s(7285),c={components:{TheSwiper:d.Z},name:"SettingsServicesPoint",props:["service"],data(){return{swipe:null}},watch:{swipe(e){"delete"==e&&this.$store.dispatch("DELETE_SERVICES",this.$props.service.id),"edit"==e&&this.$emit("getEdit",this.$props.service.id),this.swipe=null}}},p=s(89);const u=(0,p.Z)(c,[["render",o]]);var h=u;const v={class:"services-add__form"};function f(e,t,s,n,r,l){const o=(0,i.up)("font-awesome-icon"),d=(0,i.up)("the-input-text"),c=(0,i.up)("the-button");return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["settings-services__add",{"settings-services__add--open":r.isOpen}])},[(0,i._)("div",{class:(0,a.C_)(["services-add__btn",{"services-add__btn--open":r.isOpen}]),onClick:t[0]||(t[0]=(...e)=>l.clearForm&&l.clearForm(...e))},[(0,i.Wm)(o,{icon:["fas","plus"],size:"xs"})],2),(0,i._)("div",v,[(0,i.Wm)(d,{type:"text",label:"Название",modelValue:r.name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),s.editID?((0,i.wg)(),(0,i.j4)(c,{key:0,text:"Изменить",onClick:t[2]||(t[2]=e=>l.editService())})):((0,i.wg)(),(0,i.j4)(c,{key:1,text:"Добавить",onClick:t[3]||(t[3]=e=>l.addService())}))])],2)}var m=s(27),$=s(3132),y={name:"SettingsServicesAdd",props:["editID"],components:{TheInputText:$.Z,TheButton:m.Z},data(){return{isOpen:!1,name:""}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.$emit("clearForm",null)},async addService(){this.$store.dispatch("ADD_SERVICES",{name:this.name}).then(this.clearForm())},async editService(){this.$store.dispatch("EDIT_SERVICES",[{name:this.name},this.$props.editID]).then(this.clearForm())}},watch:{editID(e){if(e){let t=this.$store.getters.GET_SERVICES.find((t=>t.id==e));this.isOpen=!0,this.name=t.name}}}};const w=(0,p.Z)(y,[["render",f]]);var _=w,g={components:{SettingsServicesPoint:h,SettingsServicesAdd:_},name:"AppSettingsServices",data(){return{editID:null}},watch:{editID(e){e&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getServices(){return this.$store.getters.GET_SERVICES}}};const x=(0,p.Z)(g,[["render",r]]);var S=x}}]);
//# sourceMappingURL=636.da9d7817.js.map