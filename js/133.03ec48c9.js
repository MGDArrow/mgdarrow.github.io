"use strict";(self["webpackChunkfunerals_ru"]=self["webpackChunkfunerals_ru"]||[]).push([[133],{2711:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n=i(3396),o=i(7139);const s={class:"app__edit"},a=(0,n._)("h1",null,"Редактирование",-1),l={key:2,class:"edit-funeral"};function m(e,t,i,m,r,c){const d=(0,n.up)("add-services"),p=(0,n.up)("add-time"),u=(0,n.up)("add-templ"),h=(0,n.up)("the-input-text"),y=(0,n.up)("add-payment"),T=(0,n.up)("the-button");return(0,n.wg)(),(0,n.iD)("div",s,[a,r.service?r.time?((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("h2",{onClick:t[2]||(t[2]=e=>r.service="")},(0,o.zw)(r.service),1),(0,n._)("h2",{onClick:t[3]||(t[3]=e=>r.time="")},(0,o.zw)(r.time),1),(0,n.Wm)(u,{onLocation:t[4]||(t[4]=e=>c.getLocation(e)),inputPrors:r.funeral.templ},null,8,["inputPrors"]),(0,n.Wm)(h,{label:"Фамилия",type:"text",modelValue:r.surname,"onUpdate:modelValue":t[5]||(t[5]=e=>r.surname=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,n.Wm)(h,{label:"Комментарий",type:"text",modelValue:r.comment,"onUpdate:modelValue":t[6]||(t[6]=e=>r.comment=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,n.Wm)(y,{payment:r.payment,onPay:t[7]||(t[7]=e=>r.payment=!r.payment)},null,8,["payment"]),(0,n.Wm)(T,{text:"Редактировать",onClick:t[8]||(t[8]=e=>c.editFuneral())})])):((0,n.wg)(),(0,n.j4)(p,{key:1,onGetTime:t[1]||(t[1]=e=>r.time=e)})):((0,n.wg)(),(0,n.j4)(d,{key:0,onGetService:t[0]||(t[0]=e=>r.service=e.name)}))])}var r=i(3132),c=i(27),d=i(4519),p=i(709),u=i(4504),h=i(1482),y={name:"AppFunEdit",components:{AddServices:d.Z,AddTime:p.Z,AddTempl:u.Z,TheInputText:r.Z,AddPayment:h.Z,TheButton:c.Z},data(){return{funeral:null,service:"",time:"",locationTempl:"",locationCemetery:"",locationAddress:"",surname:"",comment:"",payment:!0}},methods:{getLocation(e){this.locationTempl="templ"===e.type?e.location:"",this.locationCemetery="cemetery"===e.type?e.location:"",this.locationAddress="address"===e.type?e.location:""},async editFuneral(){let e=this.$store.getters.GET_USER.user.email;if(e){let t=this.$store.getters.GET_DATE_SUPABASE,i=!(!this.locationTempl||"Свято-Пантелеимоновский храм (ГБ №2)"===this.locationTempl)&&this.locationTempl,n="Свято-Пантелеимоновский храм (ГБ №2)"!==this.locationTempl&&null,o=!1;(this.locationTempl||this.locationCemetery||this.locationAddress)&&this.$store.dispatch("EDIT_FUNERALS_READ",[[{service:this.service.name,date:t,time:this.time,locationTempl:this.locationTempl,locationCemetery:this.locationCemetery,locationAddress:this.locationAddress,surname:this.surname,comment:this.comment,payment:this.payment,templ:i,phoneLocation:n,phoneTempl:o,idUserName:e}],this.$route.params.id]).then(this.$router.replace({path:"/read"}))}else this.$router.replace({path:"/login"})}},async beforeMount(){this.$store.dispatch("GET_EDIT_FUNERALS_READ",this.$route.params.id).then((()=>{let e=this.$store.getters.GET_EDIT_FUNERALS;this.funeral=e,this.service=e.service,this.time=e.time,this.locationTempl=e.locationTempl,this.locationCemetery=e.locationCemetery,this.locationAddress=e.locationAddress,this.surname=e.surname,this.comment=e.comment,this.payment=e.paymen}))}},T=i(89);const A=(0,T.Z)(y,[["render",m]]);var v=A}}]);
//# sourceMappingURL=133.03ec48c9.js.map