import{P as i,L as d,s as o}from"./index-e06d63ab.js";const g=["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],D=["Пн.","Вт.","Ср.","Чт.","Пт.","Сб.","Вс."],u=["янв.","февр.","марта","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],F=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],m=["#208B9A","#FF7A00","#133AAC","#00C322","#FF1300","#7808A9","#D1006B","#F3FC01","#01B54F","#FFFFFF"],r=i("DateStore",{state(){return{year:void 0,month:void 0,day:void 0}},getters:{getCorrectDate(){let e=new Date(this.year,this.month,this.day);return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),week:e.getDay()}},getUnCorrectDate(){return{year:this.year,month:this.month,day:this.day}},getTimeCode(){let e=new Date(this.year,this.month,this.day).getTime(),t=new Date,s=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),h=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime(),l=new Date(t.getFullYear(),t.getMonth(),t.getDate()+2).getTime();return{now:e,today:s,tomorrow:h,aftertomorrow:l}},getDateShort(){let e=this.getCorrectDate;return`${g[e.week]} ${e.day} ${u[e.month]} ${e.year}`},getDateForSupabase(){let e=this.getCorrectDate;return`${e.year}-${a(e.month+1)}-${a(e.day)}`},getDateForRead(){let e=this.getTimeCode,t=this.getCorrectDate;return e.now===e.today?"Отпевания на СЕГОДНЯ":e.now===e.tomorrow?"Отпевания на ЗАВТРА":e.now===e.aftertomorrow?"Отпевания на ПОСЛЕЗАВТРА":`Отпевания на: ${a(t.day)}/${a(t.month+1)}/${t.year}`},getDateForAdd(){let e=this.getTimeCode,t=this.getCorrectDate;return e.now===e.today?"Добавить на СЕГОДНЯ":e.now===e.tomorrow?"Добавить на ЗАВТРА":e.now===e.aftertomorrow?"Добавить на ПОСЛЕЗАВТРА":`Добавить на: ${a(t.day)}/${a(t.month+1)}/${t.year}`},getDateForStatistic(){let e=this.getCorrectDate;return`Статистика за ${F[e.month]} ${e.year}`},getFirstDayMonth(){let e=this.getCorrectDate;return`${e.year}-${a(e.month+1)}-01`},getLastDayMonth(){let e=this.getCorrectDate;return`${e.year}-${a(e.month+1)}-31`},getFirstDayThreeMonths(){let e=new Date(this.year,this.month-1,this.day);return`${e.getFullYear()}-${a(e.getMonth()+1)}-01`},getLastDayThreeMonths(){let e=new Date(this.year,this.month+1,this.day);return`${e.getFullYear()}-${a(e.getMonth()+1)}-31`}},actions:{setDateToday(){let e=new Date;this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate(),n().getFunerals()},setDateIncrement(e){this.day+=e,n().getFunerals()},setDateByCalendarCell(e){this.year=e.year,this.month=e.month,this.day=e.day,n().getFunerals()}}});function a(e){return e<10?`0${e}`:e}const n=i("FuneralsStore",{state(){return{funerals:[]}},getters:{getFuneralsForRead(){return this.funerals.filter(e=>e.date==r().getDateForSupabase)},getFuneralsForEdit(e){return t=>e.funerals.find(s=>s.id==t)},getFuneralsForAllocation(){return this.getFuneralsForRead.filter(e=>e.templ==="false")},getFuneralsForPhone(){return this.getFuneralsForRead.filter(e=>e.phoneLocation==="false"||e.phoneTempl===!1)},getFuneralsForStatistic(){return this.funerals.filter(e=>e.templ!=="false"&&e.date>=r().getFirstDayMonth&&e.date<=r().getLastDayMonth)}},actions:{async getFunerals(){d().status?await o.from("FUNERAL").select("*").gte("date",r().getFirstDayThreeMonths).lte("date",r().getLastDayThreeMonths).order("locationTempl",{ascending:!0}).order("locationCemetery",{ascending:!0}).order("locationAddress",{ascending:!0}).order("time",{ascending:!0}).then(e=>{this.funerals=e.data,window.localStorage.setItem("FuneralsBigData",JSON.stringify(this.funerals))}):this.funerals=JSON.parse(window.localStorage.getItem("FuneralsBigData"))},async postFunerals(e){await o.from("FUNERAL").insert(e)},async putFunerals(e,t){await o.from("FUNERAL").update(e).eq("id",t)},async deleteFunerals(e){await o.from("FUNERAL").delete().eq("id",e)}}});export{D,F as M,r as a,m as c,n as u};
