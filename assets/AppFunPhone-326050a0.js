import{R as v}from"./ReadPoint-bc7eaa6b.js";import{_ as m,q as f,o as r,c as l,a as p,v as u,N as S,F as y,r as $,t as P,A as b,y as F}from"./index-8a95c875.js";import{u as _}from"./PhoneStore-154590b5.js";import{u as M}from"./DateStore-5979228b.js";const k={name:"TheSwiperPhone",props:["location"],mounted(){let t=this.$refs.swiper,n,s,o,e,a=null;t.addEventListener("touchstart",i=>{n=t.offsetWidth,s=i.touches[0].clientX,o=i.touches[0].clientY,t.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${t.clientHeight}px`,this.$refs.delete.style.height=`${t.clientHeight}px`}),t.addEventListener("touchmove",i=>{let d=i.touches[0].clientX,c=i.touches[0].clientY;e=d-s,a=c-o,Math.abs(e)>n/8&&Math.abs(e)>Math.abs(a)*2&&(e>0?(t.style.translate=`${e-n/8}px`,this.$refs.delete.style.width=`${Math.abs(e)-n/8}px`,this.$refs.edit.style.width="0px"):this.$props.location&&(t.style.translate=`${e+n/8}px`,this.$refs.delete.style.width="0px",this.$refs.edit.style.width=`${Math.abs(e)-n/8}px`),n/2<Math.abs(e)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))}),t.addEventListener("touchend",()=>{t.style.transition="0.4s ease-in-out",t.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",n/2<Math.abs(e)&&(e<0?this.$props.location&&this.$emit("swipe","2b"):this.$emit("swipe","templ"))})}},L={class:"js-swiper",ref:"swiperBlock"},A={class:"js-swiper__delete",ref:"delete"},B={class:"js-swiper__edit",ref:"edit"},D={class:"js-swiper__main",ref:"swiper"};function T(t,n,s,o,e,a){const i=f("font-awesome-icon");return r(),l("div",L,[p("div",A,[u(i,{icon:["fas","person-rays"]})],512),p("div",B,[u(i,{icon:["fas","hospital"]})],512),p("div",D,[S(t.$slots,"default",{},void 0,!0)],512)],512)}const g=m(k,[["render",T],["__scopeId","data-v-5fa04645"]]);const j={name:"AppFunPhone",components:{ReadPoint:v,TheSwiperPhone:g},computed:{getFunerals(){return _().phones.reduce((s,o)=>{if(M().getDateForSupabase==o.date){const{locationTempl:e}=o,{locationCemetery:a}=o,{locationAddress:i}=o;e&&(s[e]=s[e]??[],s[e].push(o)),a&&(s[a]=s[a]??[],s[a].push(o)),i&&(s[i]=s[i]??[],s[i].push(o))}return s},{})}},methods:{async getSwipe(t,n){t==="templ"?_().putPhones({phoneTempl:!0},n):_().putPhones({phoneLocation:!0},n)}}},E={class:"app__phone"},C=p("h1",null,"Обзвон",-1);function N(t,n,s,o,e,a){const i=f("read-point"),d=f("the-swiper-phone");return r(),l("div",E,[C,(r(!0),l(y,null,$(a.getFunerals,(c,w)=>(r(),l("div",{class:"phone__date",key:c.id},[p("h2",null,P(w),1),(r(!0),l(y,null,$(c,h=>(r(),b(d,{key:h.id,location:h.phoneLocation,onSwipe:x=>a.getSwipe(x,h.id)},{default:F(()=>[u(i,{funeral:h},null,8,["funeral"])]),_:2},1032,["location","onSwipe"]))),128))]))),128))])}const Y=m(j,[["render",N]]);export{Y as default};
