import{R as v}from"./ReadPoint-53c2ee05.js";import{_ as m,q as f,o as r,c as l,a as c,v as u,N as F,F as y,r as $,t as S,A as b,y as P}from"./index-384c84b3.js";import{u as _}from"./FuneralsStore-fcebe4c0.js";const M={name:"TheSwiperPhone",props:["location"],mounted(){let t=this.$refs.swiper,n,s,o,e,a=null;t.addEventListener("touchstart",i=>{n=t.offsetWidth,s=i.touches[0].clientX,o=i.touches[0].clientY,t.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${t.clientHeight}px`,this.$refs.delete.style.height=`${t.clientHeight}px`}),t.addEventListener("touchmove",i=>{let d=i.touches[0].clientX,p=i.touches[0].clientY;e=d-s,a=p-o,Math.abs(e)>n/8&&Math.abs(e)>Math.abs(a)*2&&(e>0?(t.style.translate=`${e-n/8}px`,this.$refs.delete.style.width=`${Math.abs(e)-n/8}px`,this.$refs.edit.style.width="0px"):this.$props.location&&(t.style.translate=`${e+n/8}px`,this.$refs.delete.style.width="0px",this.$refs.edit.style.width=`${Math.abs(e)-n/8}px`),n/2<Math.abs(e)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))}),t.addEventListener("touchend",()=>{t.style.transition="0.4s ease-in-out",t.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",n/2<Math.abs(e)&&(e<0?this.$props.location&&this.$emit("swipe","2b"):this.$emit("swipe","templ"))})}},k={class:"js-swiper",ref:"swiperBlock"},L={class:"js-swiper__delete",ref:"delete"},A={class:"js-swiper__edit",ref:"edit"},B={class:"js-swiper__main",ref:"swiper"};function T(t,n,s,o,e,a){const i=f("font-awesome-icon");return r(),l("div",k,[c("div",L,[u(i,{icon:["fas","person-rays"]})],512),c("div",A,[u(i,{icon:["fas","hospital"]})],512),c("div",B,[F(t.$slots,"default",{},void 0,!0)],512)],512)}const g=m(M,[["render",T],["__scopeId","data-v-5fa04645"]]);const j={name:"AppFunPhone",components:{ReadPoint:v,TheSwiperPhone:g},computed:{getFunerals(){return _().getFuneralsForPhone.reduce((s,o)=>{const{locationTempl:e}=o,{locationCemetery:a}=o,{locationAddress:i}=o;return e&&(s[e]=s[e]??[],s[e].push(o)),a&&(s[a]=s[a]??[],s[a].push(o)),i&&(s[i]=s[i]??[],s[i].push(o)),s},{})}},methods:{async getSwipe(t,n){t==="templ"?_().putFunerals({phoneTempl:!0},n):_().putFunerals({phoneLocation:!0},n)}}},E={class:"app__phone"},C=c("h1",null,"Обзвон",-1);function D(t,n,s,o,e,a){const i=f("read-point"),d=f("the-swiper-phone");return r(),l("div",E,[C,(r(!0),l(y,null,$(a.getFunerals,(p,w)=>(r(),l("div",{class:"phone__date",key:p.id},[c("h2",null,S(w),1),(r(!0),l(y,null,$(p,h=>(r(),b(d,{key:h.id,location:h.phoneLocation,onSwipe:x=>a.getSwipe(x,h.id)},{default:P(()=>[u(i,{funeral:h},null,8,["funeral"])]),_:2},1032,["location","onSwipe"]))),128))]))),128))])}const V=m(j,[["render",D]]);export{V as default};
