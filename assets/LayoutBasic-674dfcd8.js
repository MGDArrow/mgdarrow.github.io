import{_ as C,q as m,o as l,c,v as s,y as _,t as y,z as T,D as v,M as O,a as o,n as u,F as f,r as b,s as S,T as M,A as g,B as j}from"./index-cb407019.js";const D={name:"AppNavBar",computed:{phoneLength(){return this.$store.getters.GET_FUNERALS_PHONE_LENGHT},allocationLength(){return this.$store.getters.GET_FUNERALS_ALLOCATION_LENGHT}}},k={class:"funerals-menu"},A={key:0,class:"point-check"},$={key:0,class:"point-check"};function L(e,t,h,i,d,a){const r=m("font-awesome-icon"),n=m("router-link");return l(),c("nav",k,[s(n,{to:"/read",class:"funerals-menu__point"},{default:_(()=>[s(r,{icon:["fas","list-ul"],size:"xs"})]),_:1}),s(n,{to:"/statistic",class:"funerals-menu__point"},{default:_(()=>[s(r,{icon:["fas","chart-simple"],size:"xs"})]),_:1}),s(n,{to:"/",class:"funerals-menu__point"},{default:_(()=>[s(r,{icon:["fas","plus"],size:"xs"})]),_:1}),s(n,{to:"/allocation",class:"funerals-menu__point"},{default:_(()=>[a.allocationLength?(l(),c("div",A,y(a.allocationLength),1)):T("",!0),s(r,{icon:["fas","shuffle"],size:"xs"})]),_:1}),s(n,{to:"/phone",class:"funerals-menu__point"},{default:_(()=>[a.phoneLength?(l(),c("div",$,y(a.phoneLength),1)):T("",!0),s(r,{icon:["fas","phone"],size:"xs"})]),_:1}),s(n,{to:"/settings",class:"funerals-menu__point"},{default:_(()=>[s(r,{icon:["fas","gear"],size:"xs"})]),_:1})])}const w=C(D,[["render",L]]);const N={name:"AppDate",data(){return{openCalendar:!1,daysWeak:v,monthsFull:O,dateCalendarObj:void 0,calendarToday:void 0}},computed:{isShothToday(){let e=this.$store.getters.GET_DATE_OBJ;return new Date(e.year,e.month,e.day).getTime()==new Date(this.calendarToday.year,this.calendarToday.month,this.calendarToday.day).getTime()},isMonthNow(){return this.dateCalendarObj.year===this.calendarToday.year&&this.dateCalendarObj.month===this.calendarToday.month},getShortMonth(){let e=new Date(this.dateCalendarObj.year,this.dateCalendarObj.month),t=e.getFullYear(),h=e.getMonth();return`${this.monthsFull[h]} ${t}`},getDateCells(){let e=this.dateCalendarObj,t=(new Date(e.year,e.month+1,1)-new Date(e.year,e.month,1))/864e5,h=(new Date(e.year,e.month,1)-new Date(e.year,e.month-1,1))/864e5,i=new Date(e.year,e.month,1).getDay();i=i===0?6:--i;let d=[];for(let a=i;a>0;a--)d.push({day:h-a+1,isMonthStyle:"backMonth"});for(let a=1;a<=t;a++)d.push({day:a,isMonthStyle:"isMonth"});for(let a=1;a<=42-t-i;a++)d.push({day:a,isMonthStyle:"nextMonth"});return d}},methods:{getMonthNow(){this.dateCalendarObj.year=this.calendarToday.year,this.dateCalendarObj.month=this.calendarToday.month},getMonthUpd(){let e=this.$store.getters.GET_DATE_OBJ;this.dateCalendarObj.year=new Date(e.year,e.month,e.day).getFullYear(),this.dateCalendarObj.month=new Date(e.year,e.month,e.day).getMonth()},isCellActive(e){let t=this.$store.getters.GET_DATE_OBJ;return new Date(t.year,t.month,t.day).getTime()==new Date(this.dateCalendarObj.year,this.dateCalendarObj.month,e).getTime()},isCellToday(e){return e.day==this.calendarToday.day&&this.dateCalendarObj.month==this.calendarToday.month&&this.dateCalendarObj.year==this.calendarToday.year&&e.isMonthStyle=="isMonth"||e.day==this.calendarToday.day&&this.dateCalendarObj.month-1==this.calendarToday.month&&this.dateCalendarObj.year==this.calendarToday.year&&e.isMonthStyle=="backMonth"||e.day==this.calendarToday.day&&this.dateCalendarObj.month+1==this.calendarToday.month&&this.dateCalendarObj.year==this.calendarToday.year&&e.isMonthStyle=="nextMonth"},clickSetCell(e){e.isMonthStyle=="backMonth"&&(this.dateCalendarObj.month=this.dateCalendarObj.month!=0?--this.dateCalendarObj.month:11,this.dateCalendarObj.year=this.dateCalendarObj.month==11?--this.dateCalendarObj.year:this.dateCalendarObj.year),e.isMonthStyle=="nextMonth"&&(this.dateCalendarObj.month=this.dateCalendarObj.month!=11?++this.dateCalendarObj.month:0,this.dateCalendarObj.year=this.dateCalendarObj.month==0?++this.dateCalendarObj.year:this.dateCalendarObj.year);let t={year:this.dateCalendarObj.year,month:this.dateCalendarObj.month,day:e.day};this.$store.commit("UPD_ALL_DATE",t),this.openCalendar=!1}},created(){this.$store.commit("SET_TODAY"),this.$store.commit("UPD_DAY",1);let e=new Date,t=e.getFullYear(),h=e.getMonth(),i=e.getDate();this.dateCalendarObj={year:t,month:h},this.calendarToday={year:t,month:h,day:i}}},x={class:"get-date"},B={class:"get-date__menu-date"},F={class:"calendar__menu"},R={class:"calendar__weakdays"},U={class:"calendar__days"},Y=["onClick"];function P(e,t,h,i,d,a){const r=m("font-awesome-icon");return l(),c("div",x,[o("div",B,[o("div",{class:u(["menu-date__text",{"js-menu-date__text--active":a.isShothToday}]),onClick:t[0]||(t[0]=n=>{e.$store.commit("SET_TODAY"),a.getMonthUpd()})},y(e.$store.getters.GET_SHORT),3),o("div",{class:"menu-date__back--btn",onClick:t[1]||(t[1]=n=>{e.$store.commit("UPD_DAY",-1),a.getMonthUpd()})},[s(r,{icon:["fas","caret-left"]})]),o("div",{class:"menu-date__next--btn",onClick:t[2]||(t[2]=n=>{e.$store.commit("UPD_DAY",1),a.getMonthUpd()})},[s(r,{icon:["fas","caret-left"],rotation:"180"})]),o("div",{class:u(["menu-date__calendar--btn",{"js-calendar--btn--act":d.openCalendar}]),onClick:t[3]||(t[3]=n=>d.openCalendar=!d.openCalendar)},[s(r,{icon:["fas","calendar-days"]})],2)]),o("div",{class:u(["get-date__calendar",{"js-calendar--open":d.openCalendar}])},[o("div",F,[o("div",{class:"menu__back--btn",onClick:t[4]||(t[4]=n=>--d.dateCalendarObj.month)},[s(r,{icon:["fas","caret-left"]})]),o("div",{class:u(["menu__text",{"js-menu__text--active":a.isMonthNow}]),onClick:t[5]||(t[5]=n=>a.getMonthNow())},y(a.getShortMonth),3),o("div",{class:"menu__next--btn",onClick:t[6]||(t[6]=n=>++d.dateCalendarObj.month)},[s(r,{icon:["fas","caret-left"],rotation:"180"})])]),o("div",R,[(l(!0),c(f,null,b(d.daysWeak,(n,p)=>(l(),c("div",{class:"weekdays__day",key:p},y(n),1))),128))]),o("div",U,[(l(!0),c(f,null,b(a.getDateCells,n=>(l(),c("div",{class:u(["day",{"another-month":n.isMonthStyle=="backMonth"||n.isMonthStyle=="nextMonth","today-cell":a.isCellToday(n),"active-cell":a.isCellActive(n.day)&&n.isMonthStyle=="isMonth"}]),key:n.id,onClick:p=>a.clickSetCell(n)},y(n.day),11,Y))),128))])],2)])}const I=C(N,[["render",P],["__scopeId","data-v-4c361c9e"]]);const z={components:{AppNavBar:w,AppDate:I},name:"LayoutBasic",beforeMount(){this.$store.dispatch("SET_TEMPLS"),this.$store.dispatch("SET_CEMETERYS"),this.$store.dispatch("SET_SERVICES"),this.$store.dispatch("SET_FUNERALS_PHONE"),this.$store.dispatch("SET_FUNERALS_ALLOCATION"),S.channel("any").on("postgres_changes",{event:"*",schema:"*"},e=>{e.table=="TEMPL"&&this.$store.dispatch("SET_TEMPLS"),e.table=="CEMETERY"&&this.$store.dispatch("SET_CEMETERYS"),e.table=="SERVICE"&&this.$store.dispatch("SET_SERVICES"),e.table=="FUNERAL"&&(this.$store.dispatch("SET_FUNERALS_PHONE"),this.$store.dispatch("SET_FUNERALS_ALLOCATION"),this.$store.dispatch("SET_FUNERALS_READ"))}).subscribe()}},G={class:"appBlockDate"},H={class:"appBlockMain"},V={class:"appBlockNav"};function J(e,t,h,i,d,a){const r=m("app-date"),n=m("router-view"),p=m("app-nav-bar");return l(),c("div",null,[o("div",G,[s(r)]),o("div",H,[s(n,null,{default:_(({Component:E})=>[s(M,{name:"slide"},{default:_(()=>[(l(),g(j(E)))]),_:2},1024)]),_:1})]),o("div",V,[s(p)])])}const q=C(z,[["render",J]]);export{q as default};
