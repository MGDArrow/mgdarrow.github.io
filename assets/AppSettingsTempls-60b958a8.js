import{T as v,a as x}from"./TheButton-652abf29.js";import{u}from"./TemplsStore-b7b30b4b.js";import{_ as h,q as r,o as d,c as f,a as m,v as a,n as F,A as c,y,t as b,F as w,r as D}from"./index-e06d63ab.js";import{T as I}from"./TheSwiper-c34ce05a.js";const S={name:"SettingsTemplsAdd",props:["editID"],components:{TheInputText:v,TheButton:x},data(){return{isOpen:!1,name:"",abbot:"",label:"",minFun:void 0}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.abbot="",this.label="",this.minFun=void 0,this.$emit("clearForm",null)},addTempl(){u().postTempls({name:this.name,abbot:this.abbot,label:this.label,minFun:this.minFun}).then(this.clearForm())},editTempl(){u().putTempls({name:this.name,abbot:this.abbot,label:this.label,minFun:this.minFun},this.$props.editID).then(this.clearForm())}},watch:{editID(l){if(l){let e=u().templs.find(o=>o.id==l);this.isOpen=!0,this.name=e.name,this.abbot=e.abbot,this.label=e.label,this.minFun=e.minFun}}}},V={class:"templs-add__form"};function k(l,e,o,T,t,p){const _=r("font-awesome-icon"),n=r("the-input-text"),i=r("the-button");return d(),f("div",{class:F(["settings-templs__add",{"settings-templs__add--open":t.isOpen}])},[m("div",{class:F(["templs-add__btn",{"templs-add__btn--open":t.isOpen}]),onClick:e[0]||(e[0]=(...s)=>p.clearForm&&p.clearForm(...s))},[a(_,{icon:["fas","plus"],size:"xs"})],2),m("div",V,[a(n,{type:"text",label:"Название",modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=s=>t.name=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(n,{type:"text",label:"Настоятель",modelValue:t.abbot,"onUpdate:modelValue":e[2]||(e[2]=s=>t.abbot=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(n,{type:"text",label:"Район",modelValue:t.label,"onUpdate:modelValue":e[3]||(e[3]=s=>t.label=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(n,{type:"number",label:"Количество отпеваний",modelValue:t.minFun,"onUpdate:modelValue":e[4]||(e[4]=s=>t.minFun=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),o.editID?(d(),c(i,{key:0,text:"Изменить",onClick:e[5]||(e[5]=s=>p.editTempl())})):(d(),c(i,{key:1,text:"Добавить",onClick:e[6]||(e[6]=s=>p.addTempl())}))])],2)}const C=h(S,[["render",k]]);const A={components:{TheSwiper:I},name:"SettingsTemplsPoint",props:["templ"],data(){return{swipe:null}},watch:{swipe(l){l=="delete"&&u().deleteTempls(this.$props.templ.id),l=="edit"&&this.$emit("getEdit",this.$props.templ.id),this.swipe=null}}},O={class:"settings-templs__point"},U={class:"templs-point__name"},B={class:"templs-point__abbot-label"},P={class:"templs-point__abbot"},E={class:"templs-point__label"},M={class:"templs-point__min-fun"};function z(l,e,o,T,t,p){const _=r("the-swiper");return d(),c(_,{onSwipe:e[0]||(e[0]=n=>t.swipe=n)},{default:y(()=>{var n,i,s,g;return[m("div",O,[m("div",U,b((n=o.templ)==null?void 0:n.name),1),m("div",B,[m("div",P,b((i=o.templ)==null?void 0:i.abbot),1),m("div",E,b((s=o.templ)==null?void 0:s.label),1)]),m("div",M,b((g=o.templ)==null?void 0:g.minFun),1)])]}),_:1})}const N=h(A,[["render",z]]),$={components:{SettingsTemplsAdd:C,SettingsTemplsPoint:N},name:"AppSettingsTempls",data(){return{editID:null}},watch:{editID(l){l&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getTempls(){return u().templs}}},q={class:".app-settings__templs",ref:"scrollUP"};function G(l,e,o,T,t,p){const _=r("settings-templs-add"),n=r("settings-templs-point");return d(),f("div",q,[a(_,{editID:t.editID,onClearForm:e[0]||(e[0]=i=>t.editID=i)},null,8,["editID"]),(d(!0),f(w,null,D(p.getTempls,i=>(d(),c(n,{key:i.id,templ:i,onGetEdit:e[1]||(e[1]=s=>t.editID=s)},null,8,["templ"]))),128))],512)}const K=h($,[["render",G]]);export{K as default};
