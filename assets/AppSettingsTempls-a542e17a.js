import{T as v}from"./TheButton-21a87bbe.js";import{T as F}from"./TheInputText-c2898ea8.js";import{_ as y,o as d,c as f,a as o,n as T,q as u,v as _,D as h,y as D,t as b,F as x,r as S}from"./index-f2cf6056.js";import{u as c}from"./TemplsStore-925f98ad.js";import{T as w}from"./TheSwiper-d790aa28.js";const I={name:"SettingsTemplsDeanery",props:["deanery"]},V={class:"deanery__add"};function k(s,e,i,g,t,p){return d(),f("div",V,[o("div",{class:T(["switch",{"js-switch--is-bog":i.deanery=="Богоявленский"}])},null,2),o("div",{onClick:e[0]||(e[0]=r=>s.$emit("isDeanery","Николаеский"))},"Николаевский"),o("div",{onClick:e[1]||(e[1]=r=>s.$emit("isDeanery","Богоявленский"))},"Богоявленский")])}const $=y(I,[["render",k]]);const C={name:"SettingsTemplsAdd",props:["editID"],components:{TheInputText:F,TheButton:v,SettingsTemplsDeanery:$},data(){return{isOpen:!1,name:"",deanery:"Николаевский",abbot:"",label:"",minFun:void 0}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.deanery="Николаевский",this.abbot="",this.label="",this.minFun=void 0,this.$emit("clearForm",null)},addTempl(){c().postTempls({name:this.name,deanery:this.deanery,abbot:this.abbot,label:this.label,minFun:this.minFun}).then(this.clearForm())},editTempl(){c().putTempls({name:this.name,deanery:this.deanery,abbot:this.abbot,label:this.label,minFun:this.minFun},this.$props.editID).then(this.clearForm())}},watch:{editID(s){if(s){let e=c().templs.find(i=>i.id==s);this.isOpen=!0,this.name=e.name,this.deanery=e.deanery,this.abbot=e.abbot,this.label=e.label,this.minFun=e.minFun}}}},O={class:"templs-add__form"};function U(s,e,i,g,t,p){const r=u("font-awesome-icon"),l=u("the-input-text"),m=u("settings-templs-deanery"),a=u("the-button");return d(),f("div",{class:T(["settings-templs__add",{"settings-templs__add--open":t.isOpen}])},[o("div",{class:T(["templs-add__btn",{"templs-add__btn--open":t.isOpen}]),onClick:e[0]||(e[0]=(...n)=>p.clearForm&&p.clearForm(...n))},[_(r,{icon:["fas","plus"],size:"xs"})],2),o("div",O,[_(l,{type:"text",label:"Название",modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.name=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),_(l,{type:"text",label:"Настоятель",modelValue:t.abbot,"onUpdate:modelValue":e[2]||(e[2]=n=>t.abbot=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),_(l,{type:"text",label:"Район",modelValue:t.label,"onUpdate:modelValue":e[3]||(e[3]=n=>t.label=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),_(l,{type:"number",label:"Количество отпеваний",modelValue:t.minFun,"onUpdate:modelValue":e[4]||(e[4]=n=>t.minFun=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),_(m,{deanery:t.deanery,onIsDeanery:e[5]||(e[5]=n=>this.deanery=n)},null,8,["deanery"]),i.editID?(d(),h(a,{key:0,text:"Изменить",onClick:e[6]||(e[6]=n=>p.editTempl())})):(d(),h(a,{key:1,text:"Добавить",onClick:e[7]||(e[7]=n=>p.addTempl())}))])],2)}const A=y(C,[["render",U]]);const B={components:{TheSwiper:w},name:"SettingsTemplsPoint",props:["templ"],data(){return{swipe:null}},watch:{swipe(s){s=="delete"&&c().deleteTempls(this.$props.templ),s=="edit"&&this.$emit("getEdit",this.$props.templ.id),this.swipe=null}}},P={class:"settings-templs__point"},E={class:"templs-point__name"},M={class:"templs-point__abbot-label"},z={class:"templs-point__abbot"},N={class:"templs-point__label"},j={class:"templs-point__min-fun"};function q(s,e,i,g,t,p){const r=u("the-swiper");return d(),h(r,{onSwipe:e[0]||(e[0]=l=>t.swipe=l)},{default:D(()=>{var l,m,a,n;return[o("div",P,[o("div",E,b((l=i.templ)==null?void 0:l.name),1),o("div",M,[o("div",z,b((m=i.templ)==null?void 0:m.abbot),1),o("div",N,b((a=i.templ)==null?void 0:a.label),1)]),o("div",j,b((n=i.templ)==null?void 0:n.minFun),1)])]}),_:1})}const G=y(B,[["render",q]]),L={components:{SettingsTemplsAdd:A,SettingsTemplsPoint:G},name:"AppSettingsTempls",data(){return{editID:null}},watch:{editID(s){s&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getTempls(){return c().templs}}},H={class:".app-settings__templs",ref:"scrollUP"};function J(s,e,i,g,t,p){const r=u("settings-templs-add"),l=u("settings-templs-point");return d(),f("div",H,[_(r,{editID:t.editID,onClearForm:e[0]||(e[0]=m=>t.editID=m)},null,8,["editID"]),(d(!0),f(x,null,S(p.getTempls,m=>(d(),h(l,{key:m.name,templ:m,onGetEdit:e[1]||(e[1]=a=>t.editID=a)},null,8,["templ"]))),128))],512)}const Y=y(L,[["render",J]]);export{Y as default};
