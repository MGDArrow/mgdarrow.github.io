import{P as i,s as o}from"./index-9320b001.js";const l=["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],y=["Пн.","Вт.","Ср.","Чт.","Пт.","Сб.","Вс."],g=["янв.","февр.","марта","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],u=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],D=["#208B9A","#FF7A00","#133AAC","#00C322","#FF1300","#7808A9","#D1006B","#F3FC01","#01B54F","#FFFFFF"],r=i("DateStore",{state(){return{year:void 0,month:void 0,day:void 0}},getters:{getCorrectDate(){let e=new Date(this.year,this.month,this.day);return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),week:e.getDay()}},getUnCorrectDate(){return{year:this.year,month:this.month,day:this.day}},getTimeCode(){let e=new Date(this.year,this.month,this.day).getTime(),t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),h=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime(),d=new Date(t.getFullYear(),t.getMonth(),t.getDate()+2).getTime();return{now:e,today:n,tomorrow:h,aftertomorrow:d}},getDateShort(){let e=this.getCorrectDate;return`${l[e.week]} ${e.day} ${g[e.month]} ${e.year}`},getDateForSupabase(){let e=this.getCorrectDate;return`${e.year}-${a(e.month+1)}-${a(e.day)}`},getDateForRead(){let e=this.getTimeCode,t=this.getCorrectDate;return e.now===e.today?"Отпевания на СЕГОДНЯ":e.now===e.tomorrow?"Отпевания на ЗАВТРА":e.now===e.aftertomorrow?"Отпевания на ПОСЛЕЗАВТРА":`Отпевания на: ${a(t.day)}/${a(t.month+1)}/${t.year}`},getDateForAdd(){let e=this.getTimeCode,t=this.getCorrectDate;return e.now===e.today?"Добавить на СЕГОДНЯ":e.now===e.tomorrow?"Добавить на ЗАВТРА":e.now===e.aftertomorrow?"Добавить на ПОСЛЕЗАВТРА":`Добавить на: ${a(t.day)}/${a(t.month+1)}/${t.year}`},getDateForStatistic(){let e=this.getCorrectDate;return`Статистика за ${u[e.month]} ${e.year}`},getFirstDayMonth(){let e=this.getCorrectDate;return`${e.year}-${a(e.month+1)}-01`},getLastDayMonth(){let e=this.getCorrectDate;return`${e.year}-${a(e.month+1)}-31`},getFirstDayThreeMonths(){let e=new Date(this.year,this.month-1,this.day);return`${e.getFullYear()}-${a(e.getMonth()+1)}-01`},getLastDayThreeMonths(){let e=new Date(this.year,this.month+1,this.day);return`${e.getFullYear()}-${a(e.getMonth()+1)}-31`}},actions:{setDateToday(){let e=new Date;this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate(),s().getFunerals()},setDateIncrement(e){this.day+=e,s().getFunerals()},setDateByCalendarCell(e){this.year=e.year,this.month=e.month,this.day=e.day,s().getFunerals()}}});function a(e){return e<10?`0${e}`:e}const s=i("FuneralsStore",{state(){return{funerals:[]}},getters:{getFuneralsForRead(){return this.funerals.filter(e=>e.date==r().getDateForSupabase)},getFuneralsForEdit(e){return t=>e.funerals.find(n=>n.id==t)},getFuneralsForAllocation(){return this.getFuneralsForRead.filter(e=>e.templ==="false")},getFuneralsForPhone(){return this.getFuneralsForRead.filter(e=>e.phoneLocation==="false"||e.phoneTempl===!1)},getFuneralsForStatistic(){return this.funerals.filter(e=>e.templ!=="false"&&e.date>=r().getFirstDayMonth&&e.date<=r().getLastDayMonth)}},actions:{async getFunerals(){await o.from("FUNERAL").select("*").gte("date",r().getFirstDayThreeMonths).lte("date",r().getLastDayThreeMonths).order("locationTempl",{ascending:!0}).order("locationCemetery",{ascending:!0}).order("locationAddress",{ascending:!0}).order("time",{ascending:!0}).then(e=>{this.funerals=e.data})},async postFunerals(e){await o.from("FUNERAL").insert(e)},async putFunerals(e,t){await o.from("FUNERAL").update(e).eq("id",t)},async deleteFunerals(e){await o.from("FUNERAL").delete().eq("id",e)}}});export{y as D,u as M,r as a,D as c,s as u};
