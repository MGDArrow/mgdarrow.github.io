import{T as C,a as x}from"./TheButton-48819ea8.js";import{A as F,a as k,b as V,c as b}from"./AddPayment-73e7cf4e.js";import{_ as g,M as S,q as s,o as l,c as d,A as c,a as m,t as y,v as i}from"./index-384c84b3.js";import{a as B,u as h}from"./FuneralsStore-fcebe4c0.js";import"./ServicesStore-dd461a4c.js";import"./CemeterysStore-827145c0.js";import"./TemplsStore-b34c8001.js";const E={name:"AppFunEdit",components:{AddServices:F,AddTime:k,AddTempl:V,TheInputText:C,AddPayment:b,TheButton:x},data(){return{funeral:null,service:"",time:"",locationTempl:"",locationCemetery:"",locationAddress:"",surname:"",comment:"",payment:!0}},methods:{getLocation(e){this.locationTempl=e.type==="templ"?e.location:"",this.locationCemetery=e.type==="cemetery"?e.location:"",this.locationAddress=e.type==="address"?e.location:""},async editFuneral(){let e=S().user.user.email;if(e){let t=B().getDateForSupabase,r=this.locationTempl&&this.locationTempl!=="Свято-Пантелеимоновский храм (ГБ №2)"?this.locationTempl:!1,a=this.locationTempl==="Свято-Пантелеимоновский храм (ГБ №2)"?!1:null,o=!1;(this.locationTempl||this.locationCemetery||this.locationAddress)&&h().putFunerals({service:this.service.name,date:t,time:this.time,locationTempl:this.locationTempl,locationCemetery:this.locationCemetery,locationAddress:this.locationAddress,surname:this.surname,comment:this.comment,payment:this.payment,templ:r,phoneLocation:a,phoneTempl:o,idUserName:e},this.$route.params.id).then(this.$router.replace({path:"/read"}))}else this.$router.replace({path:"/login"})}},beforeMount(){let e=h().getFuneralsForEdit(this.$route.params.id);this.funeral=e,this.service=e.service,this.time=e.time,this.locationTempl=e.locationTempl,this.locationCemetery=e.locationCemetery,this.locationAddress=e.locationAddress,this.surname=e.surname,this.comment=e.comment,this.payment=e.paymen}},L={class:"app__edit"},M=m("h1",null,"Редактирование",-1),P={key:2,class:"edit-funeral"};function U(e,t,r,a,o,p){const _=s("add-services"),f=s("add-time"),v=s("add-templ"),u=s("the-input-text"),T=s("add-payment"),A=s("the-button");return l(),d("div",L,[M,o.service?o.time?(l(),d("div",P,[m("h2",{onClick:t[2]||(t[2]=n=>o.service="")},y(o.service),1),m("h2",{onClick:t[3]||(t[3]=n=>o.time="")},y(o.time),1),i(v,{onLocation:t[4]||(t[4]=n=>p.getLocation(n)),inputPrors:o.funeral.locationTempl||o.funeral.locationCemetery||o.funeral.locationAddress},null,8,["inputPrors"]),i(u,{label:"Фамилия",type:"text",modelValue:o.surname,"onUpdate:modelValue":t[5]||(t[5]=n=>o.surname=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),i(u,{label:"Комментарий",type:"text",modelValue:o.comment,"onUpdate:modelValue":t[6]||(t[6]=n=>o.comment=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),i(T,{payment:o.payment,onPay:t[7]||(t[7]=n=>o.payment=!o.payment)},null,8,["payment"]),i(A,{text:"Редактировать",onClick:t[8]||(t[8]=n=>p.editFuneral())})])):(l(),c(f,{key:1,onGetTime:t[1]||(t[1]=n=>o.time=n)})):(l(),c(_,{key:0,onGetService:t[0]||(t[0]=n=>o.service=n.name)}))])}const z=g(E,[["render",U]]);export{z as default};
