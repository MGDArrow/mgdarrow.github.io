import{T as F,a as v}from"./TheButton-d4b159c2.js";import{_ as h,q as r,o as d,c as b,a as m,v as a,n as g,A as c,y as x,t as u,F as D,r as S}from"./index-a220395f.js";import{T as y}from"./TheSwiper-44521067.js";const E={name:"SettingsTemplsAdd",props:["editID"],components:{TheInputText:F,TheButton:v},data(){return{isOpen:!1,name:"",abbot:"",label:"",minFun:void 0}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.abbot="",this.label="",this.minFun=void 0,this.$emit("clearForm",null)},async addTempl(){this.$store.dispatch("ADD_TEMPLS",{name:this.name,abbot:this.abbot,label:this.label,minFun:this.minFun}).then(this.clearForm())},async editTempl(){this.$store.dispatch("EDIT_TEMPLS",[{name:this.name,abbot:this.abbot,label:this.label,minFun:this.minFun},this.$props.editID]).then(this.clearForm())}},watch:{editID(i){if(i){let e=this.$store.getters.GET_TEMPLS.find(o=>o.id==i);this.isOpen=!0,this.name=e.name,this.abbot=e.abbot,this.label=e.label,this.minFun=e.minFun}}}},I={class:"templs-add__form"};function w(i,e,o,f,t,p){const _=r("font-awesome-icon"),n=r("the-input-text"),l=r("the-button");return d(),b("div",{class:g(["settings-templs__add",{"settings-templs__add--open":t.isOpen}])},[m("div",{class:g(["templs-add__btn",{"templs-add__btn--open":t.isOpen}]),onClick:e[0]||(e[0]=(...s)=>p.clearForm&&p.clearForm(...s))},[a(_,{icon:["fas","plus"],size:"xs"})],2),m("div",I,[a(n,{type:"text",label:"Название",modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=s=>t.name=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(n,{type:"text",label:"Настоятель",modelValue:t.abbot,"onUpdate:modelValue":e[2]||(e[2]=s=>t.abbot=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(n,{type:"text",label:"Район",modelValue:t.label,"onUpdate:modelValue":e[3]||(e[3]=s=>t.label=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(n,{type:"number",label:"Количество отпеваний",modelValue:t.minFun,"onUpdate:modelValue":e[4]||(e[4]=s=>t.minFun=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),o.editID?(d(),c(l,{key:0,text:"Изменить",onClick:e[5]||(e[5]=s=>p.editTempl())})):(d(),c(l,{key:1,text:"Добавить",onClick:e[6]||(e[6]=s=>p.addTempl())}))])],2)}const V=h(E,[["render",w]]);const P={components:{TheSwiper:y},name:"SettingsTemplsPoint",props:["templ"],data(){return{swipe:null}},watch:{swipe(i){i=="delete"&&this.$store.dispatch("DELETE_TEMPLS",this.$props.templ.id),i=="edit"&&this.$emit("getEdit",this.$props.templ.id),this.swipe=null}}},k={class:"settings-templs__point"},M={class:"templs-point__name"},A={class:"templs-point__abbot-label"},C={class:"templs-point__abbot"},L={class:"templs-point__label"},$={class:"templs-point__min-fun"};function O(i,e,o,f,t,p){const _=r("the-swiper");return d(),c(_,{onSwipe:e[0]||(e[0]=n=>t.swipe=n)},{default:x(()=>{var n,l,s,T;return[m("div",k,[m("div",M,u((n=o.templ)==null?void 0:n.name),1),m("div",A,[m("div",C,u((l=o.templ)==null?void 0:l.abbot),1),m("div",L,u((s=o.templ)==null?void 0:s.label),1)]),m("div",$,u((T=o.templ)==null?void 0:T.minFun),1)])]}),_:1})}const U=h(P,[["render",O]]),B={components:{SettingsTemplsAdd:V,SettingsTemplsPoint:U},name:"AppSettingsTempls",data(){return{editID:null}},watch:{editID(i){i&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getTempls(){return this.$store.getters.GET_TEMPLS}}},G={class:".app-settings__templs",ref:"scrollUP"};function z(i,e,o,f,t,p){const _=r("settings-templs-add"),n=r("settings-templs-point");return d(),b("div",G,[a(_,{editID:t.editID,onClearForm:e[0]||(e[0]=l=>t.editID=l)},null,8,["editID"]),(d(!0),b(D,null,S(p.getTempls,l=>(d(),c(n,{key:l.id,templ:l,onGetEdit:e[1]||(e[1]=s=>t.editID=s)},null,8,["templ"]))),128))],512)}const H=h(B,[["render",z]]);export{H as default};
