import{R as x}from"./ReadPoint-650d683e.js";import{_ as u,q as _,o as r,c as l,a as c,v as f,O as v,F as $,r as y,t as E,A as S,y as A}from"./index-be440734.js";const P={name:"TheSwiperPhone",props:["location"],mounted(){let t=this.$refs.swiper,n,s,o,e,a=null;t.addEventListener("touchstart",i=>{n=t.offsetWidth,s=i.touches[0].clientX,o=i.touches[0].clientY,t.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${t.clientHeight}px`,this.$refs.delete.style.height=`${t.clientHeight}px`}),t.addEventListener("touchmove",i=>{let d=i.touches[0].clientX,h=i.touches[0].clientY;e=d-s,a=h-o,Math.abs(e)>n/8&&Math.abs(e)>Math.abs(a)*2&&(e>0?(t.style.translate=`${e-n/8}px`,this.$refs.delete.style.width=`${Math.abs(e)-n/8}px`,this.$refs.edit.style.width="0px"):this.$props.location&&(t.style.translate=`${e+n/8}px`,this.$refs.delete.style.width="0px",this.$refs.edit.style.width=`${Math.abs(e)-n/8}px`),n/2<Math.abs(e)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))}),t.addEventListener("touchend",()=>{t.style.transition="0.4s ease-in-out",t.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",n/2<Math.abs(e)&&(e<0?this.$props.location&&this.$emit("swipe","2b"):this.$emit("swipe","templ"))})}},F={class:"js-swiper",ref:"swiperBlock"},T={class:"js-swiper__delete",ref:"delete"},L={class:"js-swiper__edit",ref:"edit"},b={class:"js-swiper__main",ref:"swiper"};function N(t,n,s,o,e,a){const i=_("font-awesome-icon");return r(),l("div",F,[c("div",T,[f(i,{icon:["fas","person-rays"]})],512),c("div",L,[f(i,{icon:["fas","hospital"]})],512),c("div",b,[v(t.$slots,"default",{},void 0,!0)],512)],512)}const M=u(P,[["render",N],["__scopeId","data-v-5fa04645"]]);const k={name:"AppFunPhone",components:{ReadPoint:x,TheSwiperPhone:M},computed:{getFunerals(){return this.$store.getters.GET_FUNERALS_PHONE.reduce((s,o)=>{if(this.$store.getters.GET_DATE_SUPABASE==o.date){const{locationTempl:e}=o,{locationCemetery:a}=o,{locationAddress:i}=o;e&&(s[e]=s[e]??[],s[e].push(o)),a&&(s[a]=s[a]??[],s[a].push(o)),i&&(s[i]=s[i]??[],s[i].push(o))}return s},{})}},methods:{async getSwipe(t,n){t==="templ"?this.$store.dispatch("EDIT_FUNERALS_PHONE",[{phoneTempl:!0},n]):this.$store.dispatch("EDIT_FUNERALS_PHONE",[{phoneLocation:!0},n])}}},B={class:"app__phone"},D=c("h1",null,"Обзвон",-1);function g(t,n,s,o,e,a){const i=_("read-point"),d=_("the-swiper-phone");return r(),l("div",B,[D,(r(!0),l($,null,y(a.getFunerals,(h,m)=>(r(),l("div",{class:"phone__date",key:h.id},[c("h2",null,E(m),1),(r(!0),l($,null,y(h,p=>(r(),S(d,{key:p.id,location:p.phoneLocation,onSwipe:w=>a.getSwipe(w,p.id)},{default:A(()=>[f(i,{funeral:p},null,8,["funeral"])]),_:2},1032,["location","onSwipe"]))),128))]))),128))])}const j=u(k,[["render",g]]);export{j as default};
