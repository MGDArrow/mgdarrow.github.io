import{T as b}from"./TheSwiper-7355a306.js";import{u as c}from"./CemeterysStore-1b0ecc7c.js";import{_ as f,q as d,o as l,A as y,y as x,a as p,t as C,c as u,v as _,n as g,F as v,r as w}from"./index-8a95c875.js";import{T as D,a as I}from"./TheButton-b0c00a93.js";const S={components:{TheSwiper:b},name:"SettingsCemeterysPoint",props:["cemetery"],data(){return{swipe:null}},watch:{swipe(s){s=="delete"&&c().deleteCemeterys(this.$props.cemetery.id),s=="edit"&&this.$emit("getEdit",this.$props.cemetery.id),this.swipe=null}}},k={class:"settings-cemeterys__point"},F={class:"cemeterys-point__name"},$={class:"cemeterys-point__label"};function T(s,e,o,h,t,m){const a=d("the-swiper");return l(),y(a,{onSwipe:e[0]||(e[0]=i=>t.swipe=i)},{default:x(()=>{var i,n;return[p("div",k,[p("div",F,C((i=o.cemetery)==null?void 0:i.name),1),p("div",$,C((n=o.cemetery)==null?void 0:n.label),1)])]}),_:1})}const A=f(S,[["render",T]]);const O={name:"SettingsCemeterysAdd",props:["editID"],components:{TheInputText:D,TheButton:I},data(){return{isOpen:!1,name:"",label:""}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.label="",this.$emit("clearForm",null)},addCemetery(){c().postCemeterys({name:this.name,label:this.label}).then(this.clearForm())},editCemetery(){c().putCemeterys({name:this.name,label:this.label},this.$props.editID).then(this.clearForm())}},watch:{editID(s){if(s){let e=c().cemeterys.find(o=>o.id==s);this.isOpen=!0,this.name=e.name,this.label=e.label}}}},V={class:"cemeterys-add__form"};function B(s,e,o,h,t,m){const a=d("font-awesome-icon"),i=d("the-input-text"),n=d("the-button");return l(),u("div",{class:g(["settings-cemeterys__add",{"settings-cemeterys__add--open":t.isOpen}])},[p("div",{class:g(["cemeterys-add__btn",{"cemeterys-add__btn--open":t.isOpen}]),onClick:e[0]||(e[0]=(...r)=>m.clearForm&&m.clearForm(...r))},[_(a,{icon:["fas","plus"],size:"xs"})],2),p("div",V,[_(i,{type:"text",label:"Название",modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=r=>t.name=r),modelModifiers:{trim:!0}},null,8,["modelValue"]),_(i,{type:"text",label:"Район",modelValue:t.label,"onUpdate:modelValue":e[2]||(e[2]=r=>t.label=r),modelModifiers:{trim:!0}},null,8,["modelValue"]),o.editID?(l(),y(n,{key:0,text:"Изменить",onClick:e[3]||(e[3]=r=>m.editCemetery())})):(l(),y(n,{key:1,text:"Добавить",onClick:e[4]||(e[4]=r=>m.addCemetery())}))])],2)}const P=f(O,[["render",B]]),E={components:{SettingsCemeterysAdd:P,SettingsCemeterysPoint:A},name:"AppSettingsCemeterys",data(){return{editID:null}},watch:{editID(s){s&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getCemeterys(){return c().cemeterys}}},U={class:".app-settings__cemeterys",ref:"scrollUP"};function z(s,e,o,h,t,m){const a=d("settings-cemeterys-add"),i=d("settings-cemeterys-point");return l(),u("div",U,[_(a,{editID:t.editID,onClearForm:e[0]||(e[0]=n=>t.editID=n)},null,8,["editID"]),(l(!0),u(v,null,w(m.getCemeterys,n=>(l(),y(i,{key:n.id,cemetery:n,onGetEdit:e[1]||(e[1]=r=>t.editID=r)},null,8,["cemetery"]))),128))],512)}const L=f(E,[["render",z]]);export{L as default};
