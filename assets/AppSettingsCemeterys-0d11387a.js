import{T as b}from"./TheSwiper-52991faa.js";import{u as p}from"./CemeterysStore-46f8a078.js";import{_ as f,q as a,o as l,E as u,z as x,a as c,t as C,c as y,v as _,n as g,F as v,r as w}from"./index-1510cbc2.js";import{T as D}from"./TheButton-dd162bf5.js";import{T as I}from"./TheInputText-c3b437fb.js";const S={components:{TheSwiper:b},name:"SettingsCemeterysPoint",props:["cemetery"],data(){return{swipe:null}},watch:{swipe(s){s=="delete"&&p().deleteCemeterys(this.$props.cemetery),s=="edit"&&this.$emit("getEdit",this.$props.cemetery.id),this.swipe=null}}},k={class:"settings-cemeterys__point"},F={class:"cemeterys-point__name"},T={class:"cemeterys-point__label"};function $(s,e,o,h,t,m){const d=a("the-swiper");return l(),u(d,{onSwipe:e[0]||(e[0]=r=>t.swipe=r)},{default:x(()=>{var r,n;return[c("div",k,[c("div",F,C((r=o.cemetery)==null?void 0:r.name),1),c("div",T,C((n=o.cemetery)==null?void 0:n.label),1)])]}),_:1})}const O=f(S,[["render",$]]);const V={name:"SettingsCemeterysAdd",props:["editID"],components:{TheInputText:I,TheButton:D},data(){return{isOpen:!1,name:"",label:""}},methods:{clearForm(){this.isOpen=!this.isOpen,this.name="",this.label="",this.$emit("clearForm",null)},addCemetery(){p().postCemeterys({name:this.name,label:this.label}).then(this.clearForm())},editCemetery(){p().putCemeterys({name:this.name,label:this.label},this.$props.editID).then(this.clearForm())}},watch:{editID(s){if(s){let e=p().cemeterys.find(o=>o.id==s);this.isOpen=!0,this.name=e.name,this.label=e.label}}}},A={class:"cemeterys-add__form"};function B(s,e,o,h,t,m){const d=a("font-awesome-icon"),r=a("the-input-text"),n=a("the-button");return l(),y("div",{class:g(["settings-cemeterys__add",{"settings-cemeterys__add--open":t.isOpen}])},[c("div",{class:g(["cemeterys-add__btn",{"cemeterys-add__btn--open":t.isOpen}]),onClick:e[0]||(e[0]=(...i)=>m.clearForm&&m.clearForm(...i))},[_(d,{icon:["fas","plus"],size:"xs"})],2),c("div",A,[_(r,{type:"text",label:"Название",modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=i=>t.name=i),modelModifiers:{trim:!0}},null,8,["modelValue"]),_(r,{type:"text",label:"Район",modelValue:t.label,"onUpdate:modelValue":e[2]||(e[2]=i=>t.label=i),modelModifiers:{trim:!0}},null,8,["modelValue"]),o.editID?(l(),u(n,{key:0,text:"Изменить",onClick:e[3]||(e[3]=i=>m.editCemetery())})):(l(),u(n,{key:1,text:"Добавить",onClick:e[4]||(e[4]=i=>m.addCemetery())}))])],2)}const E=f(V,[["render",B]]),P={components:{SettingsCemeterysAdd:E,SettingsCemeterysPoint:O},name:"AppSettingsCemeterys",data(){return{editID:null}},watch:{editID(s){s&&(this.$refs.scrollUP.parentElement.scrollTop=0)}},computed:{getCemeterys(){return p().cemeterys}}},U={class:".app-settings__cemeterys",ref:"scrollUP"};function z(s,e,o,h,t,m){const d=a("settings-cemeterys-add"),r=a("settings-cemeterys-point");return l(),y("div",U,[_(d,{editID:t.editID,onClearForm:e[0]||(e[0]=n=>t.editID=n)},null,8,["editID"]),(l(!0),y(v,null,w(m.getCemeterys,n=>(l(),u(r,{key:n.name,cemetery:n,onGetEdit:e[1]||(e[1]=i=>t.editID=i)},null,8,["cemetery"]))),128))],512)}const j=f(P,[["render",z]]);export{j as default};
