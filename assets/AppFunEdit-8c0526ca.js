import{T as f,a as E}from"./TheButton-c1b96157.js";import{A as C,a as x,b as k,c as S}from"./AddPayment-b7b58db3.js";import{_ as g,q as s,o as l,c,A as u,a as m,t as h,v as i}from"./index-be440734.js";const F={name:"AppFunEdit",components:{AddServices:C,AddTime:x,AddTempl:k,TheInputText:f,AddPayment:S,TheButton:E},data(){return{funeral:null,service:"",time:"",locationTempl:"",locationCemetery:"",locationAddress:"",surname:"",comment:"",payment:!0}},methods:{getLocation(e){this.locationTempl=e.type==="templ"?e.location:"",this.locationCemetery=e.type==="cemetery"?e.location:"",this.locationAddress=e.type==="address"?e.location:""},async editFuneral(){let e=this.$store.getters.GET_USER.user.email;if(e){let t=this.$store.getters.GET_DATE_SUPABASE,r=this.locationTempl&&this.locationTempl!=="Свято-Пантелеимоновский храм (ГБ №2)"?this.locationTempl:!1,a=this.locationTempl==="Свято-Пантелеимоновский храм (ГБ №2)"?!1:null,o=!1;(this.locationTempl||this.locationCemetery||this.locationAddress)&&this.$store.dispatch("EDIT_FUNERALS_READ",[[{service:this.service.name,date:t,time:this.time,locationTempl:this.locationTempl,locationCemetery:this.locationCemetery,locationAddress:this.locationAddress,surname:this.surname,comment:this.comment,payment:this.payment,templ:r,phoneLocation:a,phoneTempl:o,idUserName:e}],this.$route.params.id]).then(this.$router.replace({path:"/read"}))}else this.$router.replace({path:"/login"})}},async beforeMount(){this.$store.dispatch("GET_EDIT_FUNERALS_READ",this.$route.params.id).then(()=>{let e=this.$store.getters.GET_EDIT_FUNERALS;this.funeral=e,this.service=e.service,this.time=e.time,this.locationTempl=e.locationTempl,this.locationCemetery=e.locationCemetery,this.locationAddress=e.locationAddress,this.surname=e.surname,this.comment=e.comment,this.payment=e.paymen})}},U={class:"app__edit"},V=m("h1",null,"Редактирование",-1),D={key:2,class:"edit-funeral"};function L(e,t,r,a,o,p){const y=s("add-services"),_=s("add-time"),T=s("add-templ"),d=s("the-input-text"),A=s("add-payment"),v=s("the-button");return l(),c("div",U,[V,o.service?o.time?(l(),c("div",D,[m("h2",{onClick:t[2]||(t[2]=n=>o.service="")},h(o.service),1),m("h2",{onClick:t[3]||(t[3]=n=>o.time="")},h(o.time),1),i(T,{onLocation:t[4]||(t[4]=n=>p.getLocation(n)),inputPrors:o.funeral.templ},null,8,["inputPrors"]),i(d,{label:"Фамилия",type:"text",modelValue:o.surname,"onUpdate:modelValue":t[5]||(t[5]=n=>o.surname=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),i(d,{label:"Комментарий",type:"text",modelValue:o.comment,"onUpdate:modelValue":t[6]||(t[6]=n=>o.comment=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),i(A,{payment:o.payment,onPay:t[7]||(t[7]=n=>o.payment=!o.payment)},null,8,["payment"]),i(v,{text:"Редактировать",onClick:t[8]||(t[8]=n=>p.editFuneral())})])):(l(),u(_,{key:1,onGetTime:t[1]||(t[1]=n=>o.time=n)})):(l(),u(y,{key:0,onGetService:t[0]||(t[0]=n=>o.service=n.name)}))])}const N=g(F,[["render",L]]);export{N as default};
