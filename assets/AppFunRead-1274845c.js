import{R as x}from"./ReadPoint-8d46f901.js";import{T as $}from"./TheSwiper-d5664d5d.js";import{a as A,u as m}from"./FuneralsStore-ade97546.js";import{_ as w,q as d,o as s,c as i,a as o,t as f,n as C,v as h,A as v,E as y,F as S,r as F,z as D}from"./index-689b978f.js";const B={name:"ReadSort",props:["all"],data(){return{isSort:!1}},watch:{isSort(e){this.$emit("isSort",e)}}},g={class:"read-sort"},N={class:"sort__all"},z={class:"sort__block"};function T(e,t,a,r,l,n){const _=d("font-awesome-icon");return s(),i("div",g,[o("div",N,"Всего: "+f(a.all),1),o("div",z,[o("div",{class:C(["sort__switch",{"js-switch--is-sort":l.isSort}])},null,2),o("div",{onClick:t[0]||(t[0]=u=>l.isSort=!1)},[h(_,{icon:["fas","truck-field"]})]),o("div",{onClick:t[1]||(t[1]=u=>l.isSort=!0)},[h(_,{icon:["fas","church"]})])])])}const V=w(B,[["render",T]]);const b={name:"AppFunRead",components:{ReadPoint:x,TheSwiper:$,ReadSort:V},data(){return{sort:!1}},computed:{getDate(){return`Отпевания на${A().getDateDay}`},isEmpty(){return m().getFuneralsForRead.length},getFuneralsArray(){return m().getFuneralsForRead.reduce((e,t)=>{const{service:a}=t,{templ:r}=t;return this.sort?r==!1||r=="false"?(e["Не распределено"]=e["Не распределено"]??[],e["Не распределено"].push(t)):(e[r]=e[r]??[],e[r].push(t)):(e[a]=e[a]??[],e[a].push(t)),e},{})}},methods:{swipeEmit(e,t){e=="delete"&&m().deleteFunerals(t),e=="edit"&&this.$router.replace({path:`/edit/${t}`})}}},j={class:"app__read"},q={key:0,class:"read__empty"};function I(e,t,a,r,l,n){const _=d("read-sort"),u=d("read-point"),k=d("the-swiper");return s(),i("div",j,[o("h1",null,f(n.getDate),1),n.isEmpty?v("",!0):(s(),i("div",q,"Отпеваний нет")),n.isEmpty?(s(),y(_,{key:1,all:n.isEmpty,onIsSort:t[0]||(t[0]=c=>l.sort=c)},null,8,["all"])):v("",!0),(s(!0),i(S,null,F(n.getFuneralsArray,(c,R)=>(s(),i("div",{class:"read__service",key:c.id},[o("h2",null,f(R),1),(s(!0),i(S,null,F(c,p=>(s(),y(k,{onSwipe:E=>n.swipeEmit(E,p.id),key:p.id},{default:D(()=>[h(u,{funeral:p},null,8,["funeral"])]),_:2},1032,["onSwipe"]))),128))]))),128))])}const J=w(b,[["render",I]]);export{J as default};
