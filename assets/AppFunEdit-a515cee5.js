import{T as k}from"./TheInputText-c3b437fb.js";import{T as C}from"./TheButton-dd162bf5.js";import{A as x,a as F,b,c as V}from"./AddPayment-e1f010fc.js";import{_ as S,B as g,q as s,o as l,c,E as u,a as m,t as y,v as i}from"./index-1510cbc2.js";import{a as B,u as _}from"./FuneralsStore-8aa12072.js";import"./ServicesStore-0c4115a0.js";import"./CemeterysStore-46f8a078.js";import"./TemplsStore-f8a64909.js";const E={name:"AppFunEdit",components:{AddServices:x,AddTime:F,AddTempl:b,TheInputText:k,AddPayment:V,TheButton:C},data(){return{funeral:null,service:"",time:"",locationTempl:"",locationCemetery:"",locationAddress:"",surname:"",comment:"",payment:!0}},methods:{getLocation(o){this.locationTempl=o.type==="templ"?o.location:"",this.locationCemetery=o.type==="cemetery"?o.location:"",this.locationAddress=o.type==="address"?o.location:""},async editFuneral(){let o=g().user.user.email,e=B().getDateForSupabase,r=this.locationTempl&&this.locationTempl!=="Свято-Пантелеимоновский храм (ГБ №2)"?this.locationTempl:!1,a=this.locationTempl==="Свято-Пантелеимоновский храм (ГБ №2)"?!1:null,t=!1;(this.locationTempl||this.locationCemetery||this.locationAddress)&&_().putFunerals({service:this.service.name,date:e,time:this.time,locationTempl:this.locationTempl,locationCemetery:this.locationCemetery,locationAddress:this.locationAddress,surname:this.surname,comment:this.comment,payment:this.payment,templ:r,phoneLocation:a,phoneTempl:t,idUserName:o},this.$route.params.id).then(this.$router.replace({path:"/read"}))}},mounted(){let o=_().getFuneralsForEdit(this.$route.params.id);this.funeral=o,this.service=o.service,this.time=o.time,this.locationTempl=o.locationTempl,this.locationCemetery=o.locationCemetery,this.locationAddress=o.locationAddress,this.surname=o.surname,this.comment=o.comment,this.payment=o.payment}},L={class:"app__edit"},P=m("h1",null,"Редактирование",-1),U={key:2,class:"edit-funeral"},D={class:"add__time-service"};function N(o,e,r,a,t,p){const h=s("add-services"),v=s("add-time"),f=s("add-payment"),T=s("add-templ"),d=s("the-input-text"),A=s("the-button");return l(),c("div",L,[P,t.service?t.time?(l(),c("div",U,[m("div",D,[m("div",{class:"add__time-block",onClick:e[2]||(e[2]=n=>t.time="")},y(t.time),1),m("div",{class:"add__service-block",onClick:e[3]||(e[3]=n=>t.service="")},y(t.service),1),i(f,{class:"add__payment-block",payment:t.payment,onPay:e[4]||(e[4]=n=>t.payment=!t.payment)},null,8,["payment"])]),i(T,{onLocation:e[5]||(e[5]=n=>p.getLocation(n)),inputPrors:t.funeral.locationTempl||t.funeral.locationCemetery||t.funeral.locationAddress},null,8,["inputPrors"]),i(d,{label:"Фамилия",type:"text",modelValue:t.surname,"onUpdate:modelValue":e[6]||(e[6]=n=>t.surname=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),i(d,{label:"Комментарий",type:"text",modelValue:t.comment,"onUpdate:modelValue":e[7]||(e[7]=n=>t.comment=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),i(A,{text:"Редактировать",onClick:e[8]||(e[8]=n=>p.editFuneral())})])):(l(),u(v,{key:1,onGetTime:e[1]||(e[1]=n=>t.time=n)})):(l(),u(h,{key:0,onGetService:e[0]||(e[0]=n=>t.service=n.name)}))])}const J=S(E,[["render",N]]);export{J as default};
