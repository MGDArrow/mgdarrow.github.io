import{R as L}from"./ReadPoint-07136b53.js";import{_ as w,q as f,o as p,c as l,a as h,v as u,O as F,t as $,F as y,r as m,D as S,y as T}from"./index-419911db.js";import{u as _,a as D}from"./FuneralsStore-9f647dda.js";const b={name:"TheSwiperPhone",props:["phoneLocation","phoneTempl"],mounted(){let t=this.$refs.swiper,i,s,a,e,o=null;t.addEventListener("touchstart",n=>{i=t.offsetWidth,s=n.touches[0].clientX,a=n.touches[0].clientY,t.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${t.clientHeight}px`,this.$refs.delete.style.height=`${t.clientHeight}px`}),t.addEventListener("touchmove",n=>{let d=n.touches[0].clientX,c=n.touches[0].clientY;e=d-s,o=c-a,Math.abs(e)>i/8&&Math.abs(e)>Math.abs(o)*2&&(e>0?this.$props.phoneTempl===!1&&(t.style.translate=`${e-i/8}px`,this.$refs.delete.style.width=`${Math.abs(e)-i/8}px`,this.$refs.edit.style.width="0px"):(this.$props.phoneLocation===!1||this.$props.phoneLocation==="false")&&(t.style.translate=`${e+i/8}px`,this.$refs.delete.style.width="0px",this.$refs.edit.style.width=`${Math.abs(e)-i/8}px`),i/2<Math.abs(e)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))}),t.addEventListener("touchend",()=>{t.style.transition="0.4s ease-in-out",t.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",i/2<Math.abs(e)&&(e<0?(this.$props.phoneLocation===!1||this.$props.phoneLocation==="false")&&this.$emit("swipe","2b"):this.$props.phoneTempl===!1&&this.$emit("swipe","templ"))})}},P={class:"js-swiper",ref:"swiperBlock"},g={class:"js-swiper__delete",ref:"delete"},M={class:"js-swiper__edit",ref:"edit"},k={class:"js-swiper__main",ref:"swiper"};function B(t,i,s,a,e,o){const n=f("font-awesome-icon");return p(),l("div",P,[h("div",g,[u(n,{icon:["fas","person-rays"]})],512),h("div",M,[u(n,{icon:["fas","hospital"]})],512),h("div",k,[F(t.$slots,"default",{},void 0,!0)],512)],512)}const j=w(b,[["render",B],["__scopeId","data-v-c73a116c"]]);const A={name:"AppFunPhone",components:{ReadPoint:L,TheSwiperPhone:j},computed:{getFunerals(){return _().getFuneralsForPhone.reduce((s,a)=>{const{locationTempl:e}=a,{locationCemetery:o}=a,{locationAddress:n}=a;return e&&(s[e]=s[e]??[],s[e].push(a)),o&&(s[o]=s[o]??[],s[o].push(a)),n&&(s[n]=s[n]??[],s[n].push(a)),s},{})},getDate(){return`Обзвон на${D().getDateDay}`}},methods:{async getSwipe(t,i){t==="templ"?_().putFunerals({phoneTempl:!0},i):_().putFunerals({phoneLocation:!0},i)}}},E={class:"app__phone"};function C(t,i,s,a,e,o){const n=f("read-point"),d=f("the-swiper-phone");return p(),l("div",E,[h("h1",null,$(o.getDate),1),(p(!0),l(y,null,m(o.getFunerals,(c,x)=>(p(),l("div",{class:"phone__date",key:c.id},[h("h2",null,$(x),1),(p(!0),l(y,null,m(c,r=>(p(),S(d,{key:r.id,phoneLocation:r.phoneLocation,phoneTempl:r.phoneTempl,onSwipe:v=>o.getSwipe(v,r.id)},{default:T(()=>[u(n,{funeral:r},null,8,["funeral"])]),_:2},1032,["phoneLocation","phoneTempl","onSwipe"]))),128))]))),128))])}const V=w(A,[["render",C]]);export{V as default};
