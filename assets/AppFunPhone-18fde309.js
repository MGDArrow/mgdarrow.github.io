import{R as v}from"./ReadPoint-aaf78d93.js";import{_ as y,q as f,o as p,c as r,a as h,v as u,N as L,F as $,r as m,t as F,A as T,y as S}from"./index-2e3796e7.js";import{u as _}from"./FuneralsStore-9e9c8e9f.js";const b={name:"TheSwiperPhone",props:["phoneLocation","phoneTempl"],mounted(){let t=this.$refs.swiper,i,s,o,e,a=null;t.addEventListener("touchstart",n=>{i=t.offsetWidth,s=n.touches[0].clientX,o=n.touches[0].clientY,t.style.transition="none",this.$refs.delete.style.transition="none",this.$refs.edit.style.transition="none",this.$refs.edit.style.height=`${t.clientHeight}px`,this.$refs.delete.style.height=`${t.clientHeight}px`}),t.addEventListener("touchmove",n=>{let d=n.touches[0].clientX,c=n.touches[0].clientY;e=d-s,a=c-o,Math.abs(e)>i/8&&Math.abs(e)>Math.abs(a)*2&&(e>0?this.$props.phoneTempl===!1&&(t.style.translate=`${e-i/8}px`,this.$refs.delete.style.width=`${Math.abs(e)-i/8}px`,this.$refs.edit.style.width="0px"):(this.$props.phoneLocation===!1||this.$props.phoneLocation==="false")&&(t.style.translate=`${e+i/8}px`,this.$refs.delete.style.width="0px",this.$refs.edit.style.width=`${Math.abs(e)-i/8}px`),i/2<Math.abs(e)?(this.$refs.delete.style.opacity="1",this.$refs.edit.style.opacity="1"):(this.$refs.delete.style.opacity="0.8",this.$refs.edit.style.opacity="0.8"))}),t.addEventListener("touchend",()=>{t.style.transition="0.4s ease-in-out",t.style.translate="0px",this.$refs.delete.style.transition="0.4s ease-in-out",this.$refs.delete.style.width="0px",this.$refs.edit.style.transition="0.4s ease-in-out",this.$refs.edit.style.width="0px",i/2<Math.abs(e)&&(e<0?(this.$props.phoneLocation===!1||this.$props.phoneLocation==="false")&&this.$emit("swipe","2b"):this.$props.phoneTempl===!1&&this.$emit("swipe","templ"))})}},P={class:"js-swiper",ref:"swiperBlock"},M={class:"js-swiper__delete",ref:"delete"},k={class:"js-swiper__edit",ref:"edit"},A={class:"js-swiper__main",ref:"swiper"};function B(t,i,s,o,e,a){const n=f("font-awesome-icon");return p(),r("div",P,[h("div",M,[u(n,{icon:["fas","person-rays"]})],512),h("div",k,[u(n,{icon:["fas","hospital"]})],512),h("div",A,[L(t.$slots,"default",{},void 0,!0)],512)],512)}const g=y(b,[["render",B],["__scopeId","data-v-c73a116c"]]);const j={name:"AppFunPhone",components:{ReadPoint:v,TheSwiperPhone:g},computed:{getFunerals(){return _().getFuneralsForPhone.reduce((s,o)=>{const{locationTempl:e}=o,{locationCemetery:a}=o,{locationAddress:n}=o;return e&&(s[e]=s[e]??[],s[e].push(o)),a&&(s[a]=s[a]??[],s[a].push(o)),n&&(s[n]=s[n]??[],s[n].push(o)),s},{})}},methods:{async getSwipe(t,i){t==="templ"?_().putFunerals({phoneTempl:!0},i):_().putFunerals({phoneLocation:!0},i)}}},E={class:"app__phone"},C=h("h1",null,"Обзвон",-1);function D(t,i,s,o,e,a){const n=f("read-point"),d=f("the-swiper-phone");return p(),r("div",E,[C,(p(!0),r($,null,m(a.getFunerals,(c,w)=>(p(),r("div",{class:"phone__date",key:c.id},[h("h2",null,F(w),1),(p(!0),r($,null,m(c,l=>(p(),T(d,{key:l.id,phoneLocation:l.phoneLocation,phoneTempl:l.phoneTempl,onSwipe:x=>a.getSwipe(x,l.id)},{default:S(()=>[u(n,{funeral:l},null,8,["funeral"])]),_:2},1032,["phoneLocation","phoneTempl","onSwipe"]))),128))]))),128))])}const V=y(j,[["render",D]]);export{V as default};
